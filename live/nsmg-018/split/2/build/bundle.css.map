{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../LayerCake.svelte",
    "../../Html.svelte",
    "../../ScaledSvg.svelte",
    "../../Svg.svelte",
    "../../App.svelte",
    "../../AxisY.svelte",
    "../../CustomAxisX.svelte",
    "../../Legend.svelte",
    "../../MultiLine.svelte",
    "../../line_annotation.svelte",
    "../../peak_line.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport { setContext } from 'svelte';\n\timport { writable, derived } from 'svelte/store';\n\n\timport makeAccessor from './utils/makeAccessor.js';\n\timport filterObject from './utils/filterObject.js';\n\timport calcExtents from './lib/calcExtents.js';\n\timport calcDomain from './helpers/calcDomain.js';\n\timport createScale from './helpers/createScale.js';\n\timport createGetter from './helpers/createGetter.js';\n\timport getRange from './helpers/getRange.js';\n\timport defaultScales from './settings/defaultScales.js';\n\timport defaultReverses from './settings/defaultReverses.js';\n\n\texport let ssr = false;\n\texport let pointerEvents = true;\n\texport let position = 'relative';\n\texport let percentRange = false;\n\n\texport let width = undefined;\n\texport let height = undefined;\n\n\texport let containerWidth = width || 100;\n\texport let containerHeight = height || 100;\n\n\t/* --------------------------------------------\n\t * Parameters\n\t * Values that computed properties are based on and that\n\t * can be easily extended from config values\n\t *\n\t */\n\texport let x = undefined;\n\texport let y = undefined;\n\texport let z = undefined;\n\texport let r = undefined;\n\texport let custom = {};\n\texport let data = [];\n\texport let xDomain = undefined;\n\texport let yDomain = undefined;\n\texport let zDomain = undefined;\n\texport let rDomain = undefined;\n\texport let xNice = false;\n\texport let yNice = false;\n\texport let zNice = false;\n\texport let rNice = false;\n\texport let xReverse = defaultReverses.x;\n\texport let yReverse = defaultReverses.y;\n\texport let zReverse = defaultReverses.z;\n\texport let rReverse = defaultReverses.r;\n\texport let xPadding = undefined;\n\texport let yPadding = undefined;\n\texport let zPadding = undefined;\n\texport let rPadding = undefined;\n\texport let xScale = defaultScales.x;\n\texport let yScale = defaultScales.y;\n\texport let zScale = defaultScales.y;\n\texport let rScale = defaultScales.r;\n\texport let xRange = undefined;\n\texport let yRange = undefined;\n\texport let zRange = undefined;\n\texport let rRange = undefined;\n\texport let padding = {};\n\texport let extents = {};\n\texport let flatData = undefined;\n\n\t/* --------------------------------------------\n\t * Preserve a copy of our passed in settings before we modify them\n\t * Return this to the user's context so they can reference things if need be\n\t * Add the active keys since those aren't on our settings object.\n\t * This is mostly an escape-hatch\n\t */\n\tconst config = {};\n\t$: if (x) config.x = x;\n\t$: if (y) config.y = y;\n\t$: if (z) config.z = z;\n\t$: if (r) config.r = r;\n\t$: if (xDomain) config.xDomain = xDomain;\n\t$: if (yDomain) config.yDomain = yDomain;\n\t$: if (zDomain) config.zDomain = zDomain;\n\t$: if (rDomain) config.rDomain = rDomain;\n\t$: if (xRange) config.xRange = xRange;\n\t$: if (yRange) config.yRange = yRange;\n\t$: if (zRange) config.zRange = zRange;\n\t$: if (rRange) config.rRange = rRange;\n\n\t/* --------------------------------------------\n\t * Make store versions of each parameter\n\t * Prefix these with `_` to keep things organized\n\t */\n\tconst _percentRange = writable();\n\tconst _containerWidth = writable();\n\tconst _containerHeight = writable();\n\tconst _x = writable();\n\tconst _y = writable();\n\tconst _z = writable();\n\tconst _r = writable();\n\tconst _custom = writable();\n\tconst _data = writable();\n\tconst _xDomain = writable();\n\tconst _yDomain = writable();\n\tconst _zDomain = writable();\n\tconst _rDomain = writable();\n\tconst _xNice = writable();\n\tconst _yNice = writable();\n\tconst _zNice = writable();\n\tconst _rNice = writable();\n\tconst _xReverse = writable();\n\tconst _yReverse = writable();\n\tconst _zReverse = writable();\n\tconst _rReverse = writable();\n\tconst _xPadding = writable();\n\tconst _yPadding = writable();\n\tconst _zPadding = writable();\n\tconst _rPadding = writable();\n\tconst _xScale = writable();\n\tconst _yScale = writable();\n\tconst _zScale = writable();\n\tconst _rScale = writable();\n\tconst _xRange = writable();\n\tconst _yRange = writable();\n\tconst _zRange = writable();\n\tconst _rRange = writable();\n\tconst _padding = writable();\n\tconst _flatData = writable();\n\tconst _extents = writable();\n\tconst _config = writable(config);\n\n\t$: _percentRange.set(percentRange);\n\t$: _containerWidth.set(containerWidth);\n\t$: _containerHeight.set(containerHeight);\n\t$: _x.set(makeAccessor(x));\n\t$: _y.set(makeAccessor(y));\n\t$: _z.set(makeAccessor(z));\n\t$: _r.set(makeAccessor(r));\n\t$: _xDomain.set(xDomain);\n\t$: _yDomain.set(yDomain);\n\t$: _zDomain.set(zDomain);\n\t$: _rDomain.set(rDomain);\n\t$: _custom.set(custom);\n\t$: _data.set(data);\n\t$: _xNice.set(xNice);\n\t$: _yNice.set(yNice);\n\t$: _zNice.set(zNice);\n\t$: _rNice.set(rNice);\n\t$: _xReverse.set(xReverse);\n\t$: _yReverse.set(yReverse);\n\t$: _zReverse.set(zReverse);\n\t$: _rReverse.set(rReverse);\n\t$: _xPadding.set(xPadding);\n\t$: _yPadding.set(yPadding);\n\t$: _zPadding.set(zPadding);\n\t$: _rPadding.set(rPadding);\n\t$: _xScale.set(xScale);\n\t$: _yScale.set(yScale);\n\t$: _zScale.set(zScale);\n\t$: _rScale.set(rScale);\n\t$: _xRange.set(xRange);\n\t$: _yRange.set(yRange);\n\t$: _zRange.set(zRange);\n\t$: _rRange.set(rRange);\n\t$: _padding.set(padding);\n\t$: _extents.set(filterObject(extents));\n\t$: _flatData.set(flatData || data);\n\n\t/* --------------------------------------------\n\t * Create derived values\n\t * Suffix these with `_d`\n\t */\n\tconst activeGetters_d = derived([_x, _y, _z, _r], ([$x, $y, $z, $r]) => {\n\t\treturn [\n\t\t\t{ field: 'x', accessor: $x },\n\t\t\t{ field: 'y', accessor: $y },\n\t\t\t{ field: 'z', accessor: $z },\n\t\t\t{ field: 'r', accessor: $r }\n\t\t].filter(d => d.accessor);\n\t});\n\n\tconst padding_d = derived([_padding, _containerWidth, _containerHeight], ([$padding]) => {\n\t\tconst defaultPadding = { top: 0, right: 0, bottom: 0, left: 0 };\n\t\treturn Object.assign(defaultPadding, $padding);\n\t});\n\n\tconst box_d = derived([_containerWidth, _containerHeight, padding_d], ([$containerWidth, $containerHeight, $padding]) => {\n\t\tconst b = {};\n\t\tb.top = $padding.top;\n\t\tb.right = $containerWidth - $padding.right;\n\t\tb.bottom = $containerHeight - $padding.bottom;\n\t\tb.left = $padding.left;\n\t\tb.width = b.right - b.left;\n\t\tb.height = b.bottom - b.top;\n\t\tif (b.width < 0 && b.height < 0) {\n\t\t\tconsole.error('[LayerCake] Target div has negative width and height. Did you forget to set a width or height on the container?');\n\t\t} else if (b.width < 0) {\n\t\t\tconsole.error('[LayerCake] Target div has a negative width. Did you forget to set that CSS on the container?');\n\t\t} else if (b.height < 0) {\n\t\t\tconsole.error('[LayerCake] Target div has negative height. Did you forget to set that CSS on the container?');\n\t\t}\n\t\treturn b;\n\t});\n\n\tconst width_d = derived([box_d], ([$box]) => {\n\t\treturn $box.width;\n\t});\n\n\tconst height_d = derived([box_d], ([$box]) => {\n\t\treturn $box.height;\n\t});\n\n\t/* --------------------------------------------\n\t * Calculate extents by taking the extent of the data\n\t * and filling that in with anything set by the user\n\t */\n\tconst extents_d = derived([_flatData, activeGetters_d, _extents], ([$flatData, $activeGetters, $extents]) => {\n\t\treturn { ...calcExtents($flatData, $activeGetters.filter(d => !$extents[d.field])), ...$extents };\n\t});\n\n\tconst xDomain_d = derived([extents_d, _xDomain], calcDomain('x'));\n\tconst yDomain_d = derived([extents_d, _yDomain], calcDomain('y'));\n\tconst zDomain_d = derived([extents_d, _zDomain], calcDomain('z'));\n\tconst rDomain_d = derived([extents_d, _rDomain], calcDomain('r'));\n\n\tconst xScale_d = derived([_xScale, extents_d, xDomain_d, _xPadding, _xNice, _xReverse, width_d, height_d, _xRange, _percentRange], createScale('x'));\n\tconst xGet_d = derived([_x, xScale_d], createGetter);\n\n\tconst yScale_d = derived([_yScale, extents_d, yDomain_d, _yPadding, _yNice, _yReverse, width_d, height_d, _yRange, _percentRange], createScale('y'));\n\tconst yGet_d = derived([_y, yScale_d], createGetter);\n\n\tconst zScale_d = derived([_zScale, extents_d, zDomain_d, _zPadding, _zNice, _zReverse, width_d, height_d, _zRange, _percentRange], createScale('z'));\n\tconst zGet_d = derived([_z, zScale_d], createGetter);\n\n\tconst rScale_d = derived([_rScale, extents_d, rDomain_d, _rPadding, _rNice, _rReverse, width_d, height_d, _rRange, _percentRange], createScale('r'));\n\tconst rGet_d = derived([_r, rScale_d], createGetter);\n\n\tconst xRange_d = derived([xScale_d], getRange);\n\tconst yRange_d = derived([yScale_d], getRange);\n\tconst zRange_d = derived([zScale_d], getRange);\n\tconst rRange_d = derived([rScale_d], getRange);\n\n\tconst aspectRatio_d = derived([width_d, height_d], ([$aspectRatio, $width, $height]) => {\n\t\treturn $width / $height;\n\t});\n\n\t$: context = {\n\t\tactiveGetters: activeGetters_d,\n\t\twidth: width_d,\n\t\theight: height_d,\n\t\tpercentRange: _percentRange,\n\t\taspectRatio: aspectRatio_d,\n\t\tcontainerWidth: _containerWidth,\n\t\tcontainerHeight: _containerHeight,\n\t\tx: _x,\n\t\ty: _y,\n\t\tz: _z,\n\t\tr: _r,\n\t\tcustom: _custom,\n\t\tdata: _data,\n\t\txNice: _xNice,\n\t\tyNice: _yNice,\n\t\tzNice: _zNice,\n\t\trNice: _rNice,\n\t\txReverse: _xReverse,\n\t\tyReverse: _yReverse,\n\t\tzReverse: _zReverse,\n\t\trReverse: _rReverse,\n\t\txPadding: _xPadding,\n\t\tyPadding: _yPadding,\n\t\tzPadding: _zPadding,\n\t\trPadding: _rPadding,\n\t\tpadding: padding_d,\n\t\tflatData: _flatData,\n\t\textents: extents_d,\n\t\txDomain: xDomain_d,\n\t\tyDomain: yDomain_d,\n\t\tzDomain: zDomain_d,\n\t\trDomain: rDomain_d,\n\t\txRange: xRange_d,\n\t\tyRange: yRange_d,\n\t\tzRange: zRange_d,\n\t\trRange: rRange_d,\n\t\tconfig: _config,\n\t\txScale: xScale_d,\n\t\txGet: xGet_d,\n\t\tyScale: yScale_d,\n\t\tyGet: yGet_d,\n\t\tzScale: zScale_d,\n\t\tzGet: zGet_d,\n\t\trScale: rScale_d,\n\t\trGet: rGet_d\n\t};\n\n\t$: setContext('LayerCake', context);\n</script>\n\n{#if (ssr === true || typeof window !== 'undefined')}\n\t<div\n\t\tclass=\"layercake-container\"\n\t\tstyle=\"\n\t\t\tposition:{position};\n\t\t\t{position === 'absolute' ? 'top:0;right:0;bottom:0;left:0;' : ''}\n\t\t\t{pointerEvents === false ? 'pointer-events:none;' : ''}\n\t\t\"\n\t\tbind:clientWidth={containerWidth}\n\t\tbind:clientHeight={containerHeight}\n\t>\n\t\t<slot\n\t\t\twidth={$width_d}\n\t\t\theight={$height_d}\n\t\t\taspectRatio={$aspectRatio_d}\n\t\t\tcontainerWidth={$_containerWidth}\n\t\t\tcontainerHeight={$_containerHeight}\n\t\t></slot>\n\t</div>\n{/if}\n\n<style>\n\t.layercake-container,\n\t.layercake-container :global(*) {\n\t\tbox-sizing: border-box;\n\t}\n\t.layercake-container {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n",
    "<script>\n\timport { getContext } from 'svelte';\n\n\texport let zIndex = undefined;\n\texport let pointerEvents = undefined;\n\n\tlet zIndexStyle = '';\n\t$: zIndexStyle = typeof zIndex !== 'undefined' ? `z-index:${zIndex};` : '';\n\n\tlet pointerEventsStyle = '';\n\t$: pointerEventsStyle = pointerEvents === false ? 'pointer-events:none;' : '';\n\n\tconst { padding } = getContext('LayerCake');\n</script>\n\n<div\n\tclass=\"layercake-layout-html\"\n\tstyle=\"top: {$padding.top}px; right:{$padding.right}px; bottom:{$padding.bottom}px; left:{$padding.left}px;{zIndexStyle}{pointerEventsStyle}\"\n>\n\t<slot></slot>\n</div>\n\n<style>\n\tdiv,\n\tslot {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n</style>\n",
    "<script>\n\timport { getContext } from 'svelte';\n\n\texport let fixedAspectRatio = 1;\n\texport let viewBox = `0 0 100 ${100 / fixedAspectRatio}`;\n\texport let zIndex = undefined;\n\texport let pointerEvents = undefined;\n\n\tlet zIndexStyle = '';\n\t$: zIndexStyle = typeof zIndex !== 'undefined' ? `z-index:${zIndex};` : '';\n\n\tlet pointerEventsStyle = '';\n\t$: pointerEventsStyle = pointerEvents === false ? 'pointer-events:none;' : '';\n\n\tconst { padding } = getContext('LayerCake');\n</script>\n\n<svg\n\t{viewBox}\n\tpreserveAspectRatio=\"none\"\n\tstyle=\"top: {$padding.top}px; right:0px; bottom:0px; left:{$padding.left}px;width:calc(100% - {($padding.left + $padding.right)}px);height:calc(100% - {($padding.top + $padding.bottom)}px);{zIndexStyle}{pointerEventsStyle}\"\n>\n\t<defs>\n\t\t<slot name=\"defs\"></slot>\n\t</defs>\n\n\t<slot></slot>\n</svg>\n\n<style>\n\tsvg {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toverflow: visible;\n\t}\n\tsvg :global(*) {\n\t\tvector-effect: non-scaling-stroke;\n\t}\n</style>\n",
    "<script>\n\timport { getContext } from 'svelte';\n\n\texport let viewBox = undefined;\n\texport let zIndex = undefined;\n\texport let pointerEvents = undefined;\n\n\tlet zIndexStyle = '';\n\t$: zIndexStyle = typeof zIndex !== 'undefined' ? `z-index:${zIndex};` : '';\n\n\tlet pointerEventsStyle = '';\n\t$: pointerEventsStyle = pointerEvents === false ? 'pointer-events:none;' : '';\n\n\tconst { containerWidth, containerHeight, padding } = getContext('LayerCake');\n</script>\n<svg\n\tclass=\"layercake-layout-svg\"\n\t{viewBox}\n\twidth={$containerWidth}\n\theight={$containerHeight}\n\tstyle=\"{zIndexStyle}{pointerEventsStyle}\"\n>\n\t<defs>\n\t\t<slot name=\"defs\"></slot>\n\t</defs>\n\t<g transform=\"translate({$padding.left}, {$padding.top})\">\n\t\t<slot></slot>\n\t</g>\n</svg>\n\n<style>\n\tsvg {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\toverflow: visible;\n\t}\n</style>\n",
    "<script>\n  import { onMount } from 'svelte';\n\n  import { format } from \"d3-format\";\n  import { timeParse, timeFormat } from \"d3-time-format\";\n  import { LayerCake, Svg, Html } from 'layercake';\n  import { scaleBand } from 'd3-scale';\n\n  import allData from \"./data/Datasheet for NS data project - All.csv\";\n  import chartMeta from './data/chartMeta.csv';\n\n  import PeakLine from './graphics/peak_line.svelte';\n\n  export let pymChild = {};\n  export let styleNs = false; // serif or san-serif;\n  export let title = \"NSMG-018\";\n\n  function updateHeight() {\n    setTimeout(() => {\n      pymChild.sendHeight()\n    }, 50);\n  }\n\n  let seriesColors = [\"#E60032\",\"#0063E6\",\"#E6C800\",\"#E67800\",\"#00E682\"];\n\tconst colorScale = {\n    \"BRA\": seriesColors[2],\n    \"CAN\": \"#8399A8\",\n    \"CHN\": seriesColors[4],\n    \"DEU\": \"#8399A8\",\n    \"ESP\": \"#8399A8\",\n    \"FRA\": \"#8399A8\",\n    \"GBR\": seriesColors[0],\n    \"IND\": \"#8399A8\",\n    \"ITA\": seriesColors[3],\n    \"JPN\": \"#8399A8\",\n    \"KOR\": \"#8399A8\",\n    \"RUS\": \"#8399A8\",\n    \"SWE\": \"#8399A8\",\n    \"USA\": seriesColors[1]};\n  \n  const countries = [\"BRA\",\"CAN\",\"CHN\",\"DEU\",\"ESP\",\"FRA\",\"GBR\",\"IND\",\"ITA\",\"JPN\",\"KOR\",\"RUS\",\"SWE\",\"USA\"];\n  const countryNames = [\"Brazil\",\"Canada\",\"China\",\"Germany\",\"Spain\",\"France\",\"UK\",\"India\",\"Italy\",\"Japan\",\"Korea\",\"Russia\",\"Sweden\",\"USA\"];\n\n  let peakAnnotation = [\n    {fieldId: 49, title: \"time to 20% from peak\"}\n  ]\n\n  peakAnnotation = peakAnnotation.map(d => {\n    return countries.map(e => ({\n      country: e,\n      title: d.title,\n      value: allData.filter(f => +f.id === d.fieldId)[0][e]\n  }))});\n\n\tonMount(() => {\n\t\tpymChild.sendHeight();\n  });\n\n\n</script>\n\n<svelte:head>\n  <title>{title}</title>\n  <link\n  href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700&display=swap\"\n  rel=\"stylesheet\" />\n</svelte:head>\n\n<div class=\"embed-container\" class:styleNs>\n  <div class=\"section-chart\">\n    <h3>{chartMeta[4].title}</h3>\n    <h4>{chartMeta[4].subtitle}</h4>\n    <p>The middle of this chart represents each country's peak of recorded deaths. Other than the <span class=\"USA\">US</span> and Sweden, the <span class=\"GBR\">UK</span> has been the slowest to descend from its peak.</p>\n    <PeakLine annotations={peakAnnotation} />\n    <div class=\"source-text\">Source: {chartMeta[4].source}</div>\n  </div>\n</div>\n\n<style>\n  @font-face{font-family:\"Unit OT\";src:url(\"https://www.citymetric.com/sites/all/themes/creative-responsive-theme/fonts/unitot-webfont.eot?#iefix\") format(\"embedded-opentype\"), url(\"https://www.citymetric.com/sites/all/themes/creative-responsive-theme/fonts/unitot-webfont.woff\") format(\"woff\"), url(\"https://www.citymetric.com/sites/all/themes/creative-responsive-theme/fonts/unitot-webfont.ttf\") format(\"truetype\"), url(\"/sites/all/themes/creative-responsive-theme/fonts/unitot-webfont.svg#unitotregular\") format(\"svg\");font-style:normal;font-weight:normal}\n\n  .embed-container {\n    font-family: Unit OT, sans-serif;\n  }\n\n  :global(.chart-container) {\n    width: 100%;\n    padding: 8px;\n    box-sizing: border-box;\n  }\n\n  :global(.section-chart) {\n    border-top: 1px solid #222;\n    border-bottom: 1px solid #222;\n    margin: 8px 0;\n    padding-top: 8px;\n    font-family: \"Source Sans Pro\", sans-serif; /* catch IE not loading fonts */\n  }\n\n  :global(.source-text) {\n    color: #607a8a;\n    margin: 8px 0;\n    font-size: 0.75em;\n    font-family: \"Unit OT\", sans-serif; /* catch IE not loading fonts */\n\t}\n\t\n\t:global(button) {\n\t\tmargin: 4px;\n\t}\n\n  :global(h2) {\n    margin: 0;\n    padding: 0;\n    font-family: \"Unit OT\", sans-serif; /* catch IE not loading fonts */\n  }\n\n  :global(h2){\n    text-align: center;\n    font-family: \"Unit OT\", sans-serif; /* catch IE not loading fonts */\n  }\n  \n  :global(h3),\n  :global(h5) {\n\t\tmargin: 0;\n\t\tpadding: 0;\n    font-family: \"Unit OT\", sans-serif; /* catch IE not loading fonts */\n  }\n  \n  :global(h4) {\n\t\tmargin: 0;\n    padding: 0;\n    color: #c1002a;\n    font-weight: normal;\n    font-family: \"Unit OT\", sans-serif; /* catch IE not loading fonts */\n  }\n\n</style>\n",
    "<script>\n\timport { getContext } from 'svelte';\n\n\tconst { padding, xRange, xScale, yScale } = getContext('LayerCake');\n\n\texport let ticks = 4;\n\texport let gridlines = true;\n\texport let formatTick = d => d;\n\texport let xTick = 0;\n\texport let yTick = 0;\n\texport let dxTick = 0;\n\texport let dyTick = -4;\n\texport let textAnchor = 'start';\n\texport let noZeroLine = false;\n\n\t$: isBandwidth = typeof $yScale.bandwidth === 'function';\n\n\t$: tickVals = Array.isArray(ticks) ? ticks :\n\t\tisBandwidth ?\n\t\t\t$yScale.domain() :\n\t\t\t$yScale.ticks(ticks);\n</script>\n\n<g class='axis y-axis' transform='translate({-$padding.left}, 0)'>\n\t{#each tickVals as tick, i}\n\t\t<g class='tick tick-{tick}' transform='translate({$xRange[0] + (isBandwidth ? $padding.left : 0)}, {$yScale(tick)})'>\n\t\t\t{#if gridlines !== false}\n\t\t\t\t{#if !(i === 0 && noZeroLine === true)}\n\t\t\t\t\t<line\n\t\t\t\t\t\tx2='100%'\n\t\t\t\t\t\ty1={yTick + (isBandwidth ? ($yScale.bandwidth() / 2) : 0)}\n\t\t\t\t\t\ty2={yTick + (isBandwidth ? ($yScale.bandwidth() / 2) : 0)}\n\t\t\t\t\t></line>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t\t<text\n\t\t\t\tx='{xTick}'\n\t\t\t\ty='{yTick + (isBandwidth ? $yScale.bandwidth() / 2 : 0)}'\n\t\t\t\tdx='{isBandwidth ? -5 : dxTick}'\n\t\t\t\tdy='{isBandwidth ? 4 : dyTick}'\n\t\t\t\tstyle=\"text-anchor:{isBandwidth ? 'end' : textAnchor};\"\n\t\t\t>{formatTick(tick)}</text>\n\t\t</g>\n\t{/each}\n</g>\n\n<style>\n\t.tick {\n\t\tfont-size: .725em;\n\t\tfont-weight: 200;\n\t}\n\n\t.tick line {\n\t\tstroke: #aaa;\n\t}\n\n\t.tick text {\n\t\tfill: #222;\n\t}\n\n\t.tick.tick-0 line {\n\t\tstroke-dasharray: 0;\n\t}\n</style>\n",
    "<script>\n\timport { getContext } from 'svelte';\n\tconst { width, height, xScale, yScale, yRange } = getContext('LayerCake');\n\texport let gridlines = true;\n\texport let formatTick = d => d;\n\texport let baseline = false;\n\texport let snapTicks = false;\n\texport let xTick = undefined;\n\texport let yTick = 16;\n\texport let yKey = \"\";\n\texport let dxTick = 0;\n\texport let dyTick = 0;\n\texport let overrideMiddle = \"\";\n\texport let showTick = 60;\n\t$: ticks = 6; //$width > 600 ? 6 : 4;\n\t$: isBandwidth = typeof $xScale.bandwidth === 'function';\n\t$: tickVals = Array.isArray(ticks) ? ticks :\n\t\tisBandwidth ?\n\t\t\t$xScale.domain() :\n\t\t\t$xScale.ticks(ticks);\n\tfunction textAnchor(i) {\n\t\tif (snapTicks === true) {\n\t\t\tif (i === 0) {\n\t\t\t\treturn 'start';\n\t\t\t}\n\t\t\tif (i === tickVals.length - 1) {\n\t\t\t\treturn 'end';\n\t\t\t}\n\t\t}\n\t\treturn 'middle';\n\t}\n\t\n\tfunction getTickText(tick, i) {\n\t\tif(tick === 0 && overrideMiddle !== \"\") {\n\t\t\treturn overrideMiddle;\n\t\t}\n\t\telse {\n\t\t return (Math.abs(tick) === showTick ? formatTick(Math.abs(tick)) + \" days \" + (tick < 0 ? \"before\" : \"after\") : \"\")\n\t\t}\n\t}\n</script>\n\n<g class='axis x-axis'>\n\t{#each tickVals as tick, i}\n\t\t<g class='tick tick-{ tick }' transform='translate({$xScale(tick)},{$yRange[0]})'>\n\t\t\t{#if tick === 0 || gridlines === true}\n\t\t\t\t<line class=\"{tick === 0 ? \"highlight\" : \"\"}\" y1='{$height * -1}' y2='0' x1='0' x2='0'></line>\n\t\t\t{/if}\n\t\t\t<text\n\t\t\t\tx=\"{xTick || isBandwidth ? $xScale.bandwidth() / 2 : 0 }\"\n\t\t\t\ty='{yTick}'\n\t\t\t\tdx='{dxTick}'\n\t\t\t\tdy='{dyTick}'\n\t\t\t\tfill-opacity='{yKey === tick ? 1 : 0.75}'\n\t\t\t\ttext-anchor='{textAnchor(i)}'>{getTickText(tick, i)}</text>\n\t\t</g>\n\t{/each}\n\t{#if baseline === true}\n\t\t<line class=\"baseline\" y1='{$height + 0.5}' y2='{$height + 0.5}' x1='0' x2='{$width}'></line>\n\t{/if}\n</g>\n\n<style>\n\t.tick {\n\t\tfont-size: .725em;\n\t\tfont-weight: 200;\n\t}\n\tline,\n\t.tick line {\n\t\tstroke: #aaa;\n\t\tstroke-opacity: 0.5;\n\t}\n\tline.highlight {\n\t\tstroke-opacity: 1;\n\t}\n\t.tick text {\n\t\tfill: #222;\n\t}\n\t.baseline {\n\t\tstroke-dasharray: 0;\n\t}\n</style>",
    "<script>\n\texport let legendNames = [\"Brazil\",\"China\",\"UK\",\"Italy\",\"USA\"];\n\texport let seriesColors = [\"#E6C800\",\"#00E682\",\"#E60032\",\"#E67800\",\"#0063E6\"];\n\texport let inTheChart = undefined;\n\tif (inTheChart){\n\t\tconst new_legendNames = inTheChart.filter(d => legendNames.indexOf(d) >= 0);\n\t\tconst new_seriesColors = new_legendNames.map(d => seriesColors[legendNames.indexOf(d)]);\n\t\tconsole.log(\"new_legendNames\",new_legendNames);\n\t\tconsole.log(\"new_seriesColors\",new_seriesColors)\n\t\tlegendNames = new_legendNames;\n\t\tseriesColors = new_seriesColors;\n\t}\n</script>\n\n<div class='layercake-legends'>\n\t{#each legendNames as d, i}\n\t\t<div class='layercake-legend' data-id='{i}'> \n\t\t\t<div class='layercake-legend-circle' style='background:{seriesColors[i]}'></div>\n\t\t\t<div class='layercake-legend-label'><span>{d}</span></div>\n\t\t</div>\n\t{/each}\n</div>\n\n<style>\n\t.layercake-legend {\n\t\tdisplay: inline-block;\n\t    vertical-align: top;\n\t    margin-right: 2em;\n\t    white-space: nowrap;\n\t\t\n\t}\n\t.layercake-legend-circle {\n\t\tdisplay: inline-block;\n\t    vertical-align: middle;\n\t    width: 1em;\n\t    height: 1em;\n\t    border-radius: 100%;\n\t}\n\t.layercake-legend-label {\n\t\tfont-size: 12px;\n\t\tdisplay: inline-block;\n    \tvertical-align: middle;\n\t}\n</style>",
    "<script>\n\timport { getContext } from 'svelte';\n\timport LineAnnotation from '../graphics/line_annotation.svelte';\n\n\tconst { data, xGet, yGet, xScale } = getContext('LayerCake');\n\n\texport let colorScale = d => '#000';\n\texport let annotations = [];\n\texport let opactiy = 1;\n\n\t$: xOffset = $xScale.bandwidth ? $xScale.bandwidth() / 2 : 0;\n\n\t$: getAnnotation = (group) => {\n\t\tlet annotation = annotations[0].filter(d => d.country === group.key)[0];\n\t\tif(annotation) {\n\t\t\tlet chartVal = group.values.filter(d => d.key === +annotation.value)[0];\n\n\t\t\treturn [\n\t\t\t\t{...annotation,\n\t\t\t\tyVal: +chartVal.value}\n\t\t\t];\n\t\t}\n\t\treturn [];\n\t}\n\n\t$: path = values => {\n\t\treturn 'M' + values\n\t\t\t.map(d => {\n\t\t\t\treturn $xGet(d) + xOffset + ',' + $yGet(d);\n\t\t\t})\n\t\t\t.join('L');\n\t};\n\n</script>\n\n<g class=\"line-group\">\n\t{#each $data as group}\n\t\t<path\n\t\t\tclass='path-line'\n\t\t\td='{path(group.values)}'\n\t\t\tstroke=\"{colorScale[group.key]}\"\n\t\t\tstroke-opacity={opactiy}\n\t\t></path>\n\t\t{#if annotations.length > 0}\n\t\t\t<LineAnnotation\n\t\t\t\tannotations={getAnnotation(group)}\n\t\t\t\tfill=\"{colorScale[group.key]}\"\n\t\t\t/>\n\t\t{/if}\n\t{/each}\n</g>\n\n<style>\n\t.path-line {\n\t\tfill: none;\n\t\tstroke-linejoin: round;\n\t\tstroke-linecap: round;\n\t\tstroke-width: 2px;\n\t}\n</style>\n",
    "<script>\n\timport { getContext } from 'svelte';\n\n\tconst { xGet, yGet, data, width, height } = getContext('LayerCake');\n\n  export let annotations = [];\n  export let fill;\n\n  annotations = annotations.filter(d => d.value !== \"\");\n\n  $: getY = (annotation) => {\n    const yVal = annotation.yVal; //$data.slice(0).filter(d => d.key === +annotation.value);\n    return $yGet({value: yVal}); //yVal.length > 0 ? $yGet(yVal[0]) : $yGet({value: 0});\n  }\n  \n  let colors = [\"#E60032\",\"#0063E6\",\"#00E682\",\"#E6C800\",\"#E67800\"];\n\n</script>\n\n{#each annotations as annotation, i}\n  <circle fill=\"{fill || colors[i % 5]}\" r=\"4\" cx=\"{$xGet({key: +annotation.value})}\" cy=\"{getY(annotation)}\">\n    <title>{annotation.title}</title>\n  </circle>\n{/each}\n\n<style>\n  circle {\n    stroke: #222;\n  }\n</style>",
    "\n<script>\n  import { LayerCake, Svg, calcExtents, uniques, flatten } from \"layercake\";\n  import { timeParse, timeFormat } from \"d3-time-format\";\n  import { scaleBand } from \"d3-scale\";\n  import { format } from \"d3-format\";\n\n  import csvData from '../data/deaths_relative_to_peak.csv';\n\n  import MultiLine from \"../components/MultiLine.svelte\";\n  import AxisX from \"../components/CustomAxisX.svelte\";\n  import AxisY from \"../components/AxisY.svelte\";\n  import Legend from \"../components/Legend.svelte\";\n  \n  export let data = [];\n  export let padding = { top: 20, right: 16, bottom: 20, left: 36 };\n  export let xTicks = 7;\n  export let annotations = [];\n  export let withArea = false;\n\n  let seriesColors = [\"#E60032\",\"#0063E6\",\"#E6C800\",\"#E67800\",\"#00E682\"];\n  const colorScale = {\n    \"BRA\": seriesColors[2],\n    \"CAN\": \"#ccc\",\n    \"CHN\": seriesColors[4],\n    \"DEU\": \"#ccc\",\n    \"ESP\": \"#ccc\",\n    \"FRA\": \"#ccc\",\n    \"GBR\": seriesColors[0],\n    \"IND\": \"#ccc\",\n    \"ITA\": seriesColors[3],\n    \"JPN\": \"#ccc\",\n    \"KOR\": \"#ccc\",\n    \"RUS\": \"#ccc\",\n    \"SWE\": \"#ccc\",\n    \"USA\": seriesColors[1]};\n  const parseDate = timeParse('%Y-%m-%d');\n\n  const countries = uniques(csvData.map(d => d.CountryCode).filter(d => d !== \"ESP\"))\n  const formattedData = countries.map(e => {\n    return { \n      key: e,\n      sort: colorScale[e] !== \"#ccc\" ? 1 : 0,\n      values: csvData.filter(d => d.CountryCode === e)\n      .map(d => ({\n        key: +d.days_since_peak,\n        value: +d.indexed_seven_day_average,\n      })).filter(d => d.key < 90 && d.key > -90)\n      }\n  }).sort((a, b) => a.sort - b.sort);\n</script>\n\n<Legend />\n<div class=\"chart-container\">\n  <LayerCake\n    {padding}\n    x={d => d.key}\n    y={d => +d.value}\n    yDomain={[0, null]}\n    xDomain={[-90, 90]}\n    data={formattedData}\n    flatData={flatten(formattedData.map(d => d.values))}>\n    <Svg>\n      <AxisX\n        gridlines={false}\n        formatTick={d => d}\n        overrideMiddle={\"Peak\"} />\n      <AxisY tickNumber={4} gridlines={true} />\n      <MultiLine {colorScale} {annotations} />\n    </Svg>\n  </LayerCake>\n</div>\n\n<style>\n  .chart-container{\n    width: 100%;\n    height: 25em;\n  }\n</style>"
  ],
  "names": [],
  "mappings": "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"
}