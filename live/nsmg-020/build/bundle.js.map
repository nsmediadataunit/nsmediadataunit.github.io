{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/svelte/store/index.mjs","../../node_modules/layercake/src/utils/makeAccessor.js","../../node_modules/layercake/src/utils/canBeZero.js","../../node_modules/layercake/src/utils/filterObject.js","../../node_modules/layercake/src/lib/calcExtents.js","../../node_modules/layercake/src/utils/partialDomain.js","../../node_modules/layercake/src/helpers/calcDomain.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/range.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-array/src/quantile.js","../../node_modules/d3-array/src/merge.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/d3-scale/src/pow.js","../../node_modules/d3-scale/src/quantile.js","../../node_modules/layercake/src/settings/defaultScales.js","../../node_modules/layercake/src/helpers/createScale.js","../../node_modules/layercake/src/settings/getDefaultRange.js","../../node_modules/layercake/src/utils/padScale.js","../../node_modules/layercake/src/helpers/createGetter.js","../../node_modules/layercake/src/helpers/getRange.js","../../node_modules/layercake/src/settings/defaultReverses.js","../../node_modules/layercake/src/LayerCake.svelte","../../node_modules/layercake/src/layouts/Svg.svelte","../../node_modules/d3-geo/src/adder.js","../../node_modules/d3-geo/src/math.js","../../node_modules/d3-geo/src/noop.js","../../node_modules/d3-geo/src/stream.js","../../node_modules/d3-geo/src/area.js","../../node_modules/d3-geo/src/cartesian.js","../../node_modules/d3-geo/src/bounds.js","../../node_modules/d3-geo/src/centroid.js","../../node_modules/d3-geo/src/constant.js","../../node_modules/d3-geo/src/compose.js","../../node_modules/d3-geo/src/rotation.js","../../node_modules/d3-geo/src/circle.js","../../node_modules/d3-geo/src/clip/buffer.js","../../node_modules/d3-geo/src/pointEqual.js","../../node_modules/d3-geo/src/clip/rejoin.js","../../node_modules/d3-geo/src/polygonContains.js","../../node_modules/d3-geo/src/clip/index.js","../../node_modules/d3-geo/src/clip/antimeridian.js","../../node_modules/d3-geo/src/clip/circle.js","../../node_modules/d3-geo/src/clip/rectangle.js","../../node_modules/d3-geo/src/clip/line.js","../../node_modules/d3-geo/src/length.js","../../node_modules/d3-geo/src/distance.js","../../node_modules/d3-geo/src/contains.js","../../node_modules/d3-geo/src/graticule.js","../../node_modules/d3-geo/src/identity.js","../../node_modules/d3-geo/src/path/area.js","../../node_modules/d3-geo/src/path/bounds.js","../../node_modules/d3-geo/src/path/centroid.js","../../node_modules/d3-geo/src/path/context.js","../../node_modules/d3-geo/src/path/measure.js","../../node_modules/d3-geo/src/path/string.js","../../node_modules/d3-geo/src/path/index.js","../../node_modules/d3-geo/src/transform.js","../../node_modules/d3-geo/src/projection/fit.js","../../node_modules/d3-geo/src/projection/resample.js","../../node_modules/d3-geo/src/projection/index.js","../../node_modules/d3-geo/src/projection/conic.js","../../node_modules/d3-geo/src/projection/conicEqualArea.js","../../node_modules/d3-geo/src/projection/cylindricalEqualArea.js","../../node_modules/d3-geo/src/projection/albers.js","../../node_modules/d3-geo/src/projection/azimuthal.js","../../node_modules/d3-geo/src/projection/azimuthalEqualArea.js","../../node_modules/d3-geo/src/projection/azimuthalEquidistant.js","../../node_modules/d3-geo/src/projection/mercator.js","../../node_modules/d3-geo/src/projection/conicConformal.js","../../node_modules/d3-geo/src/projection/equirectangular.js","../../node_modules/d3-geo/src/projection/conicEquidistant.js","../../node_modules/d3-geo/src/projection/equalEarth.js","../../node_modules/d3-geo/src/projection/gnomonic.js","../../node_modules/d3-geo/src/projection/naturalEarth1.js","../../node_modules/d3-geo/src/projection/orthographic.js","../../node_modules/d3-geo/src/projection/stereographic.js","../../node_modules/d3-geo/src/projection/transverseMercator.js","../../node_modules/d3-geo/src/clip/extent.js","../../node_modules/d3-geo/src/interpolate.js","../../node_modules/d3-geo/src/projection/albersUsa.js","../../node_modules/d3-geo/src/projection/identity.js","../../src/graphics/choromap.svelte","../../node_modules/d3-scale/src/threshold.js","../../src/graphics/search_table.svelte","../../src/graphics/map.svelte","../../src/App.svelte","../../src/main.js","../../node_modules/pym.js/dist/pym.v1.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', `display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ` +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = `data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>`;\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error(`Cannot have duplicate keys in a keyed each`);\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if ($$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.23.2' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import canBeZero from './canBeZero.js';\n\nexport default function makeAccessor (acc) {\n\tif (!canBeZero(acc)) return null;\n\tif (Array.isArray(acc)) {\n\t\treturn d => acc.map(k => {\n\t\t\treturn typeof k !== 'function' ? d[k] : k(d);\n\t\t});\n\t} else if (typeof acc !== 'function') { // eslint-disable-line no-else-return\n\t\treturn d => d[acc];\n\t}\n\treturn acc;\n}\n","/* --------------------------------------------\n *\n * Return a truthy value if is zero\n *\n * --------------------------------------------\n */\nexport default function canBeZero (val) {\n\tif (val === 0) {\n\t\treturn true;\n\t}\n\treturn val;\n}\n","/* --------------------------------------------\n *\n * Remove undefined fields from an object\n *\n * --------------------------------------------\n */\n\n// From Object.fromEntries polyfill https://github.com/tc39/proposal-object-from-entries/blob/master/polyfill.js#L1\nfunction fromEntries(iter) {\n\tconst obj = {};\n\n\tfor (const pair of iter) {\n\t\tif (Object(pair) !== pair) {\n\t\t\tthrow new TypeError(\"iterable for fromEntries should yield objects\");\n\t\t}\n\n\t\t// Consistency with Map: contract is that entry has \"0\" and \"1\" keys, not\n\t\t// that it is an array or iterable.\n\n\t\tconst { \"0\": key, \"1\": val } = pair;\n\n\t\tObject.defineProperty(obj, key, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\twritable: true,\n\t\t\tvalue: val,\n\t\t});\n\t}\n\n\treturn obj;\n}\n\nexport default function filterObject (obj) {\n\treturn fromEntries(Object.entries(obj).filter(([key, value]) => {\n\t\treturn value !== undefined;\n\t}));\n}\n","/* --------------------------------------------\n *\n * Calculate the extents of desired fields\n * Returns an object like:\n * `{x: [0, 10], y: [-10, 10]}` if `fields` is\n * `[{field:'x', accessor: d => d.x}, {field:'y', accessor: d => d.y}]`\n *\n * --------------------------------------------\n */\nexport default function calcExtents (data, fields) {\n\tif (!Array.isArray(data) || data.length === 0) return null;\n\tconst extents = {};\n\tconst fl = fields.length;\n\tlet i;\n\tlet j;\n\tlet f;\n\tlet val;\n\tlet s;\n\n\tif (fl) {\n\t\tfor (i = 0; i < fl; i += 1) {\n\t\t\tconst firstRow = fields[i].accessor(data[0]);\n\t\t\tif (firstRow === undefined || firstRow === null || Number.isNaN(firstRow) === true) {\n\t\t\t\textents[fields[i].field] = [Infinity, -Infinity];\n\t\t\t} else {\n\t\t\t\textents[fields[i].field] = Array.isArray(firstRow) ? firstRow : [firstRow, firstRow];\n\t\t\t}\n\t\t}\n\t\tconst dl = data.length;\n\t\tfor (i = 0; i < dl; i += 1) {\n\t\t\tfor (j = 0; j < fl; j += 1) {\n\t\t\t\tf = fields[j];\n\t\t\t\tval = f.accessor(data[i]);\n\t\t\t\ts = f.field;\n\t\t\t\tif (Array.isArray(val)) {\n\t\t\t\t\tconst vl = val.length;\n\t\t\t\t\tfor (let k = 0; k < vl; k += 1) {\n\t\t\t\t\t\tif (val[k] !== undefined && val[k] !== null && Number.isNaN(val[k]) === false) {\n\t\t\t\t\t\t\tif (val[k] < extents[s][0]) {\n\t\t\t\t\t\t\t\textents[s][0] = val[k];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (val[k] > extents[s][1]) {\n\t\t\t\t\t\t\t\textents[s][1] = val[k];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (val !== undefined && val !== null && Number.isNaN(val) === false) {\n\t\t\t\t\tif (val < extents[s][0]) {\n\t\t\t\t\t\textents[s][0] = val;\n\t\t\t\t\t}\n\t\t\t\t\tif (val > extents[s][1]) {\n\t\t\t\t\t\textents[s][1] = val;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n\treturn extents;\n}\n","/* --------------------------------------------\n * If we have a domain from settings, fill in\n * any null values with ones from our measured extents\n * otherwise, return the measured extent\n */\nexport default function partialDomain (domain, directive) {\n\tif (Array.isArray(directive) === true) {\n\t\treturn directive.map((d, i) => {\n\t\t\tif (d === null) {\n\t\t\t\treturn domain[i];\n\t\t\t}\n\t\t\treturn d;\n\t\t});\n\t}\n\treturn domain;\n}\n","import partialDomain from '../utils/partialDomain.js';\n\nexport default\tfunction calcDomain (s) {\n\treturn function domainCalc ([$extents, $domain]) {\n\t\treturn $extents ? partialDomain($extents[s], $domain) : $domain;\n\t};\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import number from \"./number\";\n\nexport default function(values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","export default function(arrays) {\n  var n = arrays.length,\n      m,\n      i = -1,\n      j = 0,\n      merged,\n      array;\n\n  while (++i < n) j += arrays[i].length;\n  merged = new Array(j);\n\n  while (--n >= 0) {\n    array = arrays[n];\n    m = array.length;\n    while (--m >= 0) {\n      merged[--j] = array[m];\n    }\n  }\n\n  return merged;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {linearish} from \"./linear.js\";\nimport {copy, identity, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformPow(exponent) {\n  return function(x) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  };\n}\n\nfunction transformSqrt(x) {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n}\n\nfunction transformSquare(x) {\n  return x < 0 ? -x * x : x * x;\n}\n\nexport function powish(transform) {\n  var scale = transform(identity, identity),\n      exponent = 1;\n\n  function rescale() {\n    return exponent === 1 ? transform(identity, identity)\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\n        : transform(transformPow(exponent), transformPow(1 / exponent));\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\n  };\n\n  return linearish(scale);\n}\n\nexport default function pow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, pow()).exponent(scale.exponent());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n\nexport function sqrt() {\n  return pow.apply(null, arguments).exponent(0.5);\n}\n","import {ascending, bisect, quantile as threshold} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function quantile() {\n  var domain = [],\n      range = [],\n      thresholds = [],\n      unknown;\n\n  function rescale() {\n    var i = 0, n = Math.max(1, range.length);\n    thresholds = new Array(n - 1);\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : range[bisect(thresholds, x)];\n  }\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN] : [\n      i > 0 ? thresholds[i - 1] : domain[0],\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n    ];\n  };\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (let d of _) if (d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return rescale();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.quantiles = function() {\n    return thresholds.slice();\n  };\n\n  scale.copy = function() {\n    return quantile()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import { scaleLinear, scaleSqrt } from 'd3-scale';\n\nexport default {\n\tx: scaleLinear,\n\ty: scaleLinear,\n\tz: scaleLinear,\n\tr: scaleSqrt\n};\n","import defaultScales from '../settings/defaultScales.js';\nimport partialDomain from '../utils/partialDomain.js';\nimport padScale from '../utils/padScale.js';\nimport getDefaultRange from '../settings/getDefaultRange.js';\n\nexport default function createScale (s) {\n\treturn function scaleCreator ([$scale, $extents, $domain, $padding, $nice, $reverse, $width, $height, $range, $percentScale]) {\n\t\tif ($extents === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst defaultRange = getDefaultRange(s, $width, $height, $reverse, $range, $percentScale);\n\n\t\tconst scale = $scale === defaultScales[s] ? $scale() : $scale.copy();\n\n\t\t/* --------------------------------------------\n\t\t * On creation, `$domain` will already have any nulls filled in\n\t\t * But if we set it via the context it might not, so rerun it through partialDomain\n\t\t */\n\t\tscale\n\t\t\t.domain(partialDomain($extents[s], $domain))\n\t\t\t.range(defaultRange);\n\n\t\tif ($padding) {\n\t\t\tscale.domain(padScale(scale, $padding));\n\t\t}\n\n\t\tif ($nice === true) {\n\t\t\tif (typeof scale.nice === 'function') {\n\t\t\t\tscale.nice();\n\t\t\t} else {\n\t\t\t\tconsole.error(`[Layer Cake] You set \\`${s}Nice: true\\` but the ${s}Scale does not have a \\`.nice\\` method. Ignoring...`);\n\t\t\t}\n\t\t}\n\n\t\treturn scale;\n\t};\n}\n","/* eslint-disable no-nested-ternary */\nfunction calcBaseRange(s, width, height, reverse, percentRange) {\n\tlet min;\n\tlet max;\n\tif (percentRange === true) {\n\t\tmin = 0;\n\t\tmax = 100;\n\t} else {\n\t\tmin = s === 'r' ? 1 : 0;\n\t\tmax = s === 'y' ? height : s === 'r' ? 25 : width;\n\t}\n\treturn reverse === true ? [max, min] : [min, max];\n}\n\nexport default function getDefaultRange(s, width, height, reverse, range, percentRange) {\n\treturn !range\n\t\t? calcBaseRange(s, width, height, reverse, percentRange)\n\t\t: typeof range === 'function'\n\t\t\t? range({ width, height })\n\t\t\t: range;\n}\n","/* --------------------------------------------\n *\n * Returns a modified scale domain by in/decreasing\n * the min/max by taking the desired difference\n * in pixels and converting it to units of data.\n * Returns an array that you can set as the new domain.\n *\n * --------------------------------------------\n */\nexport default function padScale (scale, padding) {\n\tif (typeof scale.range !== 'function') {\n\t\tthrow new Error('Scale method `range` must be a function');\n\t}\n\tif (typeof scale.domain !== 'function') {\n\t\tthrow new Error('Scale method `domain` must be a function');\n\t}\n\tif (!Array.isArray(padding)) {\n\t\treturn scale.domain();\n\t}\n\n\tconst domain = scale.domain();\n\n\tconst range = scale.range();\n\tconst domainExtent = domain[1] - domain[0];\n\n\tconst w = Math.abs(range[1] - range[0]);\n\n\tconst paddedDomain = domain.slice();\n\tconst pl = padding.length;\n\tfor (let i = 0; i < pl; i += 1) {\n\t\tconst sign = i === 0 ? -1 : 1;\n\t\tconst isTime = Object.prototype.toString.call(domain[i]) === '[object Date]';\n\n\t\tconst perc = padding[i] / w;\n\t\tconst paddingAdjuster = domainExtent * perc;\n\t\tconst d = (isTime ? domain[i].getTime() : domain[i]);\n\t\tconst adjustedDomain = d + paddingAdjuster * sign;\n\t\tpaddedDomain[i] = isTime ? new Date(adjustedDomain) : adjustedDomain;\n\t}\n\treturn paddedDomain;\n}\n","export default function createGetter ([$acc, $scale]) {\n\treturn d => {\n\t\tconst val = $acc(d);\n\t\tif (Array.isArray(val)) {\n\t\t\treturn val.map(v => $scale(v));\n\t\t}\n\t\treturn $scale(val);\n\t};\n}\n","export default function getRange([$scale]) {\n\tif (typeof $scale === 'function') {\n\t\tif (typeof $scale.range === 'function') {\n\t\t\treturn $scale.range();\n\t\t}\n\t\tconsole.error('[LayerCake] Your scale doesn\\'t have a `.range` method?');\n\t}\n\treturn null;\n}\n","export default {\n\tx: false,\n\ty: true,\n\tz: false,\n\tr: false\n};\n","<script>\n\timport { setContext } from 'svelte';\n\timport { writable, derived } from 'svelte/store';\n\n\timport makeAccessor from './utils/makeAccessor.js';\n\timport filterObject from './utils/filterObject.js';\n\timport calcExtents from './lib/calcExtents.js';\n\timport calcDomain from './helpers/calcDomain.js';\n\timport createScale from './helpers/createScale.js';\n\timport createGetter from './helpers/createGetter.js';\n\timport getRange from './helpers/getRange.js';\n\timport defaultScales from './settings/defaultScales.js';\n\timport defaultReverses from './settings/defaultReverses.js';\n\n\texport let ssr = false;\n\texport let pointerEvents = true;\n\texport let position = 'relative';\n\texport let percentRange = false;\n\n\texport let width = undefined;\n\texport let height = undefined;\n\n\texport let containerWidth = width || 100;\n\texport let containerHeight = height || 100;\n\n\t/* --------------------------------------------\n\t * Parameters\n\t * Values that computed properties are based on and that\n\t * can be easily extended from config values\n\t *\n\t */\n\texport let x = undefined;\n\texport let y = undefined;\n\texport let z = undefined;\n\texport let r = undefined;\n\texport let custom = {};\n\texport let data = [];\n\texport let xDomain = undefined;\n\texport let yDomain = undefined;\n\texport let zDomain = undefined;\n\texport let rDomain = undefined;\n\texport let xNice = false;\n\texport let yNice = false;\n\texport let zNice = false;\n\texport let rNice = false;\n\texport let xReverse = defaultReverses.x;\n\texport let yReverse = defaultReverses.y;\n\texport let zReverse = defaultReverses.z;\n\texport let rReverse = defaultReverses.r;\n\texport let xPadding = undefined;\n\texport let yPadding = undefined;\n\texport let zPadding = undefined;\n\texport let rPadding = undefined;\n\texport let xScale = defaultScales.x;\n\texport let yScale = defaultScales.y;\n\texport let zScale = defaultScales.y;\n\texport let rScale = defaultScales.r;\n\texport let xRange = undefined;\n\texport let yRange = undefined;\n\texport let zRange = undefined;\n\texport let rRange = undefined;\n\texport let padding = {};\n\texport let extents = {};\n\texport let flatData = undefined;\n\n\t/* --------------------------------------------\n\t * Preserve a copy of our passed in settings before we modify them\n\t * Return this to the user's context so they can reference things if need be\n\t * Add the active keys since those aren't on our settings object.\n\t * This is mostly an escape-hatch\n\t */\n\tconst config = {};\n\t$: if (x) config.x = x;\n\t$: if (y) config.y = y;\n\t$: if (z) config.z = z;\n\t$: if (r) config.r = r;\n\t$: if (xDomain) config.xDomain = xDomain;\n\t$: if (yDomain) config.yDomain = yDomain;\n\t$: if (zDomain) config.zDomain = zDomain;\n\t$: if (rDomain) config.rDomain = rDomain;\n\t$: if (xRange) config.xRange = xRange;\n\t$: if (yRange) config.yRange = yRange;\n\t$: if (zRange) config.zRange = zRange;\n\t$: if (rRange) config.rRange = rRange;\n\n\t/* --------------------------------------------\n\t * Make store versions of each parameter\n\t * Prefix these with `_` to keep things organized\n\t */\n\tconst _percentRange = writable();\n\tconst _containerWidth = writable();\n\tconst _containerHeight = writable();\n\tconst _x = writable();\n\tconst _y = writable();\n\tconst _z = writable();\n\tconst _r = writable();\n\tconst _custom = writable();\n\tconst _data = writable();\n\tconst _xDomain = writable();\n\tconst _yDomain = writable();\n\tconst _zDomain = writable();\n\tconst _rDomain = writable();\n\tconst _xNice = writable();\n\tconst _yNice = writable();\n\tconst _zNice = writable();\n\tconst _rNice = writable();\n\tconst _xReverse = writable();\n\tconst _yReverse = writable();\n\tconst _zReverse = writable();\n\tconst _rReverse = writable();\n\tconst _xPadding = writable();\n\tconst _yPadding = writable();\n\tconst _zPadding = writable();\n\tconst _rPadding = writable();\n\tconst _xScale = writable();\n\tconst _yScale = writable();\n\tconst _zScale = writable();\n\tconst _rScale = writable();\n\tconst _xRange = writable();\n\tconst _yRange = writable();\n\tconst _zRange = writable();\n\tconst _rRange = writable();\n\tconst _padding = writable();\n\tconst _flatData = writable();\n\tconst _extents = writable();\n\tconst _config = writable(config);\n\n\t$: _percentRange.set(percentRange);\n\t$: _containerWidth.set(containerWidth);\n\t$: _containerHeight.set(containerHeight);\n\t$: _x.set(makeAccessor(x));\n\t$: _y.set(makeAccessor(y));\n\t$: _z.set(makeAccessor(z));\n\t$: _r.set(makeAccessor(r));\n\t$: _xDomain.set(xDomain);\n\t$: _yDomain.set(yDomain);\n\t$: _zDomain.set(zDomain);\n\t$: _rDomain.set(rDomain);\n\t$: _custom.set(custom);\n\t$: _data.set(data);\n\t$: _xNice.set(xNice);\n\t$: _yNice.set(yNice);\n\t$: _zNice.set(zNice);\n\t$: _rNice.set(rNice);\n\t$: _xReverse.set(xReverse);\n\t$: _yReverse.set(yReverse);\n\t$: _zReverse.set(zReverse);\n\t$: _rReverse.set(rReverse);\n\t$: _xPadding.set(xPadding);\n\t$: _yPadding.set(yPadding);\n\t$: _zPadding.set(zPadding);\n\t$: _rPadding.set(rPadding);\n\t$: _xScale.set(xScale);\n\t$: _yScale.set(yScale);\n\t$: _zScale.set(zScale);\n\t$: _rScale.set(rScale);\n\t$: _xRange.set(xRange);\n\t$: _yRange.set(yRange);\n\t$: _zRange.set(zRange);\n\t$: _rRange.set(rRange);\n\t$: _padding.set(padding);\n\t$: _extents.set(filterObject(extents));\n\t$: _flatData.set(flatData || data);\n\n\t/* --------------------------------------------\n\t * Create derived values\n\t * Suffix these with `_d`\n\t */\n\tconst activeGetters_d = derived([_x, _y, _z, _r], ([$x, $y, $z, $r]) => {\n\t\treturn [\n\t\t\t{ field: 'x', accessor: $x },\n\t\t\t{ field: 'y', accessor: $y },\n\t\t\t{ field: 'z', accessor: $z },\n\t\t\t{ field: 'r', accessor: $r }\n\t\t].filter(d => d.accessor);\n\t});\n\n\tconst padding_d = derived([_padding, _containerWidth, _containerHeight], ([$padding]) => {\n\t\tconst defaultPadding = { top: 0, right: 0, bottom: 0, left: 0 };\n\t\treturn Object.assign(defaultPadding, $padding);\n\t});\n\n\tconst box_d = derived([_containerWidth, _containerHeight, padding_d], ([$containerWidth, $containerHeight, $padding]) => {\n\t\tconst b = {};\n\t\tb.top = $padding.top;\n\t\tb.right = $containerWidth - $padding.right;\n\t\tb.bottom = $containerHeight - $padding.bottom;\n\t\tb.left = $padding.left;\n\t\tb.width = b.right - b.left;\n\t\tb.height = b.bottom - b.top;\n\t\tif (b.width < 0 && b.height < 0) {\n\t\t\tconsole.error('[LayerCake] Target div has negative width and height. Did you forget to set a width or height on the container?');\n\t\t} else if (b.width < 0) {\n\t\t\tconsole.error('[LayerCake] Target div has a negative width. Did you forget to set that CSS on the container?');\n\t\t} else if (b.height < 0) {\n\t\t\tconsole.error('[LayerCake] Target div has negative height. Did you forget to set that CSS on the container?');\n\t\t}\n\t\treturn b;\n\t});\n\n\tconst width_d = derived([box_d], ([$box]) => {\n\t\treturn $box.width;\n\t});\n\n\tconst height_d = derived([box_d], ([$box]) => {\n\t\treturn $box.height;\n\t});\n\n\t/* --------------------------------------------\n\t * Calculate extents by taking the extent of the data\n\t * and filling that in with anything set by the user\n\t */\n\tconst extents_d = derived([_flatData, activeGetters_d, _extents], ([$flatData, $activeGetters, $extents]) => {\n\t\treturn { ...calcExtents($flatData, $activeGetters.filter(d => !$extents[d.field])), ...$extents };\n\t});\n\n\tconst xDomain_d = derived([extents_d, _xDomain], calcDomain('x'));\n\tconst yDomain_d = derived([extents_d, _yDomain], calcDomain('y'));\n\tconst zDomain_d = derived([extents_d, _zDomain], calcDomain('z'));\n\tconst rDomain_d = derived([extents_d, _rDomain], calcDomain('r'));\n\n\tconst xScale_d = derived([_xScale, extents_d, xDomain_d, _xPadding, _xNice, _xReverse, width_d, height_d, _xRange, _percentRange], createScale('x'));\n\tconst xGet_d = derived([_x, xScale_d], createGetter);\n\n\tconst yScale_d = derived([_yScale, extents_d, yDomain_d, _yPadding, _yNice, _yReverse, width_d, height_d, _yRange, _percentRange], createScale('y'));\n\tconst yGet_d = derived([_y, yScale_d], createGetter);\n\n\tconst zScale_d = derived([_zScale, extents_d, zDomain_d, _zPadding, _zNice, _zReverse, width_d, height_d, _zRange, _percentRange], createScale('z'));\n\tconst zGet_d = derived([_z, zScale_d], createGetter);\n\n\tconst rScale_d = derived([_rScale, extents_d, rDomain_d, _rPadding, _rNice, _rReverse, width_d, height_d, _rRange, _percentRange], createScale('r'));\n\tconst rGet_d = derived([_r, rScale_d], createGetter);\n\n\tconst xRange_d = derived([xScale_d], getRange);\n\tconst yRange_d = derived([yScale_d], getRange);\n\tconst zRange_d = derived([zScale_d], getRange);\n\tconst rRange_d = derived([rScale_d], getRange);\n\n\tconst aspectRatio_d = derived([width_d, height_d], ([$aspectRatio, $width, $height]) => {\n\t\treturn $width / $height;\n\t});\n\n\t$: context = {\n\t\tactiveGetters: activeGetters_d,\n\t\twidth: width_d,\n\t\theight: height_d,\n\t\tpercentRange: _percentRange,\n\t\taspectRatio: aspectRatio_d,\n\t\tcontainerWidth: _containerWidth,\n\t\tcontainerHeight: _containerHeight,\n\t\tx: _x,\n\t\ty: _y,\n\t\tz: _z,\n\t\tr: _r,\n\t\tcustom: _custom,\n\t\tdata: _data,\n\t\txNice: _xNice,\n\t\tyNice: _yNice,\n\t\tzNice: _zNice,\n\t\trNice: _rNice,\n\t\txReverse: _xReverse,\n\t\tyReverse: _yReverse,\n\t\tzReverse: _zReverse,\n\t\trReverse: _rReverse,\n\t\txPadding: _xPadding,\n\t\tyPadding: _yPadding,\n\t\tzPadding: _zPadding,\n\t\trPadding: _rPadding,\n\t\tpadding: padding_d,\n\t\tflatData: _flatData,\n\t\textents: extents_d,\n\t\txDomain: xDomain_d,\n\t\tyDomain: yDomain_d,\n\t\tzDomain: zDomain_d,\n\t\trDomain: rDomain_d,\n\t\txRange: xRange_d,\n\t\tyRange: yRange_d,\n\t\tzRange: zRange_d,\n\t\trRange: rRange_d,\n\t\tconfig: _config,\n\t\txScale: xScale_d,\n\t\txGet: xGet_d,\n\t\tyScale: yScale_d,\n\t\tyGet: yGet_d,\n\t\tzScale: zScale_d,\n\t\tzGet: zGet_d,\n\t\trScale: rScale_d,\n\t\trGet: rGet_d\n\t};\n\n\t$: setContext('LayerCake', context);\n</script>\n\n{#if (ssr === true || typeof window !== 'undefined')}\n\t<div\n\t\tclass=\"layercake-container\"\n\t\tstyle=\"\n\t\t\tposition:{position};\n\t\t\t{position === 'absolute' ? 'top:0;right:0;bottom:0;left:0;' : ''}\n\t\t\t{pointerEvents === false ? 'pointer-events:none;' : ''}\n\t\t\"\n\t\tbind:clientWidth={containerWidth}\n\t\tbind:clientHeight={containerHeight}\n\t>\n\t\t<slot\n\t\t\twidth={$width_d}\n\t\t\theight={$height_d}\n\t\t\taspectRatio={$aspectRatio_d}\n\t\t\tcontainerWidth={$_containerWidth}\n\t\t\tcontainerHeight={$_containerHeight}\n\t\t></slot>\n\t</div>\n{/if}\n\n<style>\n\t.layercake-container,\n\t.layercake-container :global(*) {\n\t\tbox-sizing: border-box;\n\t}\n\t.layercake-container {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n</style>\n","<script>\n\timport { getContext } from 'svelte';\n\n\texport let viewBox = undefined;\n\texport let zIndex = undefined;\n\texport let pointerEvents = undefined;\n\n\tlet zIndexStyle = '';\n\t$: zIndexStyle = typeof zIndex !== 'undefined' ? `z-index:${zIndex};` : '';\n\n\tlet pointerEventsStyle = '';\n\t$: pointerEventsStyle = pointerEvents === false ? 'pointer-events:none;' : '';\n\n\tconst { containerWidth, containerHeight, padding } = getContext('LayerCake');\n</script>\n<svg\n\tclass=\"layercake-layout-svg\"\n\t{viewBox}\n\twidth={$containerWidth}\n\theight={$containerHeight}\n\tstyle=\"{zIndexStyle}{pointerEventsStyle}\"\n>\n\t<defs>\n\t\t<slot name=\"defs\"></slot>\n\t</defs>\n\t<g transform=\"translate({$padding.left}, {$padding.top})\">\n\t\t<slot></slot>\n\t</g>\n</svg>\n\n<style>\n\tsvg {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\toverflow: visible;\n\t}\n</style>\n","// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305–363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\n\nexport default function() {\n  return new Adder;\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function(y) {\n    add(temp, y, this.t);\n    add(this, temp.s, this.s);\n    if (this.s) this.t += temp.t;\n    else this.s = temp.t;\n  },\n  valueOf: function() {\n    return this.s;\n  }\n};\n\nvar temp = new Adder;\n\nfunction add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = (a - av) + (b - bv);\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import adder from \"./adder.js\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nexport var areaRingSum = adder();\n\nvar areaSum = adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum.reset();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum.reset();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import adder from \"./adder.js\";\nimport {areaStream, areaRingSum} from \"./area.js\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport {abs, degrees, epsilon, radians} from \"./math.js\";\nimport stream from \"./stream.js\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum = adder(),\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum.reset();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  },\n  sphere: function() {\n    lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  }\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360°) % 360°, except that we want\n// the distance between ±180° to be 360°.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","import {asin, atan2, cos, degrees, epsilon, epsilon2, radians, sin, sqrt} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nvar W0, W1,\n    X0, Y0, Z0,\n    X1, Y1, Z1,\n    X2, Y2, Z2,\n    lambda00, phi00, // first point\n    x0, y0, z0; // previous point\n\nvar centroidStream = {\n  sphere: noop,\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  }\n};\n\n// Arithmetic mean of Cartesian vectors.\nfunction centroidPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  centroidPointCartesian(cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi));\n}\n\nfunction centroidPointCartesian(x, y, z) {\n  ++W0;\n  X0 += (x - X0) / W0;\n  Y0 += (y - Y0) / W0;\n  Z0 += (z - Z0) / W0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidLinePointFirst;\n}\n\nfunction centroidLinePointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidStream.point = centroidLinePoint;\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLinePoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      w = atan2(sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\n// See J. E. Brock, The Inertia Tensor for a Spherical Triangle,\n// J. Applied Mechanics 42, 239 (1975).\nfunction centroidRingStart() {\n  centroidStream.point = centroidRingPointFirst;\n}\n\nfunction centroidRingEnd() {\n  centroidRingPoint(lambda00, phi00);\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingPointFirst(lambda, phi) {\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  centroidStream.point = centroidRingPoint;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidRingPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      cx = y0 * z - z0 * y,\n      cy = z0 * x - x0 * z,\n      cz = x0 * y - y0 * x,\n      m = sqrt(cx * cx + cy * cy + cz * cz),\n      w = asin(m), // line weight = angle\n      v = m && -w / m; // area weight multiplier\n  X2 += v * cx;\n  Y2 += v * cy;\n  Z2 += v * cz;\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nexport default function(object) {\n  W0 = W1 =\n  X0 = Y0 = Z0 =\n  X1 = Y1 = Z1 =\n  X2 = Y2 = Z2 = 0;\n  stream(object, centroidStream);\n\n  var x = X2,\n      y = Y2,\n      z = Z2,\n      m = x * x + y * y + z * z;\n\n  // If the area-weighted ccentroid is undefined, fall back to length-weighted ccentroid.\n  if (m < epsilon2) {\n    x = X1, y = Y1, z = Z1;\n    // If the feature has zero length, fall back to arithmetic mean of point vectors.\n    if (W1 < epsilon) x = X0, y = Y0, z = Z0;\n    m = x * x + y * y + z * z;\n    // If the feature still has an undefined ccentroid, then return.\n    if (m < epsilon2) return [NaN, NaN];\n  }\n\n  return [atan2(y, x) * degrees, asin(z / sqrt(m)) * degrees];\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  return [abs(lambda) > pi ? lambda + Math.round(-lambda / tau) * tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0°, 0°], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(6),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","import adder from \"./adder.js\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nvar sum = adder();\n\nfunction longitude(point) {\n  if (abs(point[0]) <= pi)\n    return point[0];\n  else\n    return sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  sum.reset();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the point’s meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon) ^ (winding & 1);\n}\n","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 6 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1 ⨯ n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygon’s polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","import adder from \"./adder.js\";\nimport {abs, atan2, cos, radians, sin, sqrt} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nvar lengthSum = adder(),\n    lambda0,\n    sinPhi0,\n    cosPhi0;\n\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\n\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\n\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\n\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\n\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      delta = abs(lambda - lambda0),\n      cosDelta = cos(delta),\n      sinDelta = sin(delta),\n      x = cosPhi * sinDelta,\n      y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\n      z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\n}\n\nexport default function(object) {\n  lengthSum.reset();\n  stream(object, lengthStream);\n  return +lengthSum;\n}\n","import length from \"./length.js\";\n\nvar coordinates = [null, null],\n    object = {type: \"LineString\", coordinates: coordinates};\n\nexport default function(a, b) {\n  coordinates[0] = a;\n  coordinates[1] = b;\n  return length(object);\n}\n","import {default as polygonContains} from \"./polygonContains.js\";\nimport {default as distance} from \"./distance.js\";\nimport {epsilon2, radians} from \"./math.js\";\n\nvar containsObjectType = {\n  Feature: function(object, point) {\n    return containsGeometry(object.geometry, point);\n  },\n  FeatureCollection: function(object, point) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) if (containsGeometry(features[i].geometry, point)) return true;\n    return false;\n  }\n};\n\nvar containsGeometryType = {\n  Sphere: function() {\n    return true;\n  },\n  Point: function(object, point) {\n    return containsPoint(object.coordinates, point);\n  },\n  MultiPoint: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPoint(coordinates[i], point)) return true;\n    return false;\n  },\n  LineString: function(object, point) {\n    return containsLine(object.coordinates, point);\n  },\n  MultiLineString: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsLine(coordinates[i], point)) return true;\n    return false;\n  },\n  Polygon: function(object, point) {\n    return containsPolygon(object.coordinates, point);\n  },\n  MultiPolygon: function(object, point) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) if (containsPolygon(coordinates[i], point)) return true;\n    return false;\n  },\n  GeometryCollection: function(object, point) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) if (containsGeometry(geometries[i], point)) return true;\n    return false;\n  }\n};\n\nfunction containsGeometry(geometry, point) {\n  return geometry && containsGeometryType.hasOwnProperty(geometry.type)\n      ? containsGeometryType[geometry.type](geometry, point)\n      : false;\n}\n\nfunction containsPoint(coordinates, point) {\n  return distance(coordinates, point) === 0;\n}\n\nfunction containsLine(coordinates, point) {\n  var ao, bo, ab;\n  for (var i = 0, n = coordinates.length; i < n; i++) {\n    bo = distance(coordinates[i], point);\n    if (bo === 0) return true;\n    if (i > 0) {\n      ab = distance(coordinates[i], coordinates[i - 1]);\n      if (\n        ab > 0 &&\n        ao <= ab &&\n        bo <= ab &&\n        (ao + bo - ab) * (1 - Math.pow((ao - bo) / ab, 2)) < epsilon2 * ab\n      )\n        return true;\n    }\n    ao = bo;\n  }\n  return false;\n}\n\nfunction containsPolygon(coordinates, point) {\n  return !!polygonContains(coordinates.map(ringRadians), pointRadians(point));\n}\n\nfunction ringRadians(ring) {\n  return ring = ring.map(pointRadians), ring.pop(), ring;\n}\n\nfunction pointRadians(point) {\n  return [point[0] * radians, point[1] * radians];\n}\n\nexport default function(object, point) {\n  return (object && containsObjectType.hasOwnProperty(object.type)\n      ? containsObjectType[object.type]\n      : containsGeometry)(object, point);\n}\n","import {range} from \"d3-array\";\nimport {abs, ceil, epsilon} from \"./math.js\";\n\nfunction graticuleX(y0, y1, dy) {\n  var y = range(y0, y1 - epsilon, dy).concat(y1);\n  return function(x) { return y.map(function(y) { return [x, y]; }); };\n}\n\nfunction graticuleY(x0, x1, dx) {\n  var x = range(x0, x1 - epsilon, dx).concat(x1);\n  return function(y) { return x.map(function(x) { return [x, y]; }); };\n}\n\nexport default function graticule() {\n  var x1, x0, X1, X0,\n      y1, y0, Y1, Y0,\n      dx = 10, dy = dx, DX = 90, DY = 360,\n      x, y, X, Y,\n      precision = 2.5;\n\n  function graticule() {\n    return {type: \"MultiLineString\", coordinates: lines()};\n  }\n\n  function lines() {\n    return range(ceil(X0 / DX) * DX, X1, DX).map(X)\n        .concat(range(ceil(Y0 / DY) * DY, Y1, DY).map(Y))\n        .concat(range(ceil(x0 / dx) * dx, x1, dx).filter(function(x) { return abs(x % DX) > epsilon; }).map(x))\n        .concat(range(ceil(y0 / dy) * dy, y1, dy).filter(function(y) { return abs(y % DY) > epsilon; }).map(y));\n  }\n\n  graticule.lines = function() {\n    return lines().map(function(coordinates) { return {type: \"LineString\", coordinates: coordinates}; });\n  };\n\n  graticule.outline = function() {\n    return {\n      type: \"Polygon\",\n      coordinates: [\n        X(X0).concat(\n        Y(Y1).slice(1),\n        X(X1).reverse().slice(1),\n        Y(Y0).reverse().slice(1))\n      ]\n    };\n  };\n\n  graticule.extent = function(_) {\n    if (!arguments.length) return graticule.extentMinor();\n    return graticule.extentMajor(_).extentMinor(_);\n  };\n\n  graticule.extentMajor = function(_) {\n    if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n    X0 = +_[0][0], X1 = +_[1][0];\n    Y0 = +_[0][1], Y1 = +_[1][1];\n    if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n    if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.extentMinor = function(_) {\n    if (!arguments.length) return [[x0, y0], [x1, y1]];\n    x0 = +_[0][0], x1 = +_[1][0];\n    y0 = +_[0][1], y1 = +_[1][1];\n    if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n    if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.step = function(_) {\n    if (!arguments.length) return graticule.stepMinor();\n    return graticule.stepMajor(_).stepMinor(_);\n  };\n\n  graticule.stepMajor = function(_) {\n    if (!arguments.length) return [DX, DY];\n    DX = +_[0], DY = +_[1];\n    return graticule;\n  };\n\n  graticule.stepMinor = function(_) {\n    if (!arguments.length) return [dx, dy];\n    dx = +_[0], dy = +_[1];\n    return graticule;\n  };\n\n  graticule.precision = function(_) {\n    if (!arguments.length) return precision;\n    precision = +_;\n    x = graticuleX(y0, y1, 90);\n    y = graticuleY(x0, x1, precision);\n    X = graticuleX(Y0, Y1, 90);\n    Y = graticuleY(X0, X1, precision);\n    return graticule;\n  };\n\n  return graticule\n      .extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]])\n      .extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n}\n\nexport function graticule10() {\n  return graticule()();\n}\n","export default function(x) {\n  return x;\n}\n","import adder from \"../adder.js\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = adder(),\n    areaRingSum = adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum.reset();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n","import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n","import adder from \"../adder.js\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum.reset();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","export default function PathString() {\n  this._string = [];\n}\n\nPathString.prototype = {\n  _radius: 4.5,\n  _circle: circle(4.5),\n  pointRadius: function(_) {\n    if ((_ = +_) !== this._radius) this._radius = _, this._circle = null;\n    return this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._string.push(\"Z\");\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._string.push(\"M\", x, \",\", y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._string.push(\"L\", x, \",\", y);\n        break;\n      }\n      default: {\n        if (this._circle == null) this._circle = circle(this._radius);\n        this._string.push(\"M\", x, \",\", y, this._circle);\n        break;\n      }\n    }\n  },\n  result: function() {\n    if (this._string.length) {\n      var result = this._string.join(\"\");\n      this._string = [];\n      return result;\n    } else {\n      return null;\n    }\n  }\n};\n\nfunction circle(radius) {\n  return \"m0,\" + radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius\n      + \"z\";\n}\n","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  var pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    return arguments.length ? (projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream, path) : projection;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  return path.projection(projection).context(context);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n","import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = (alpha ? scaleTranslateRotate : scaleTranslate)(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {degrees, pi, radians} from \"../math.js\";\nimport {projectionMutator} from \"./index.js\";\n\nexport function conicProjection(projectAt) {\n  var phi0 = 0,\n      phi1 = pi / 3,\n      m = projectionMutator(projectAt),\n      p = m(phi0, phi1);\n\n  p.parallels = function(_) {\n    return arguments.length ? m(phi0 = _[0] * radians, phi1 = _[1] * radians) : [phi0 * degrees, phi1 * degrees];\n  };\n\n  return p;\n}\n","import {abs, asin, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {cylindricalEqualAreaRaw} from \"./cylindricalEqualArea.js\";\n\nexport function conicEqualAreaRaw(y0, y1) {\n  var sy0 = sin(y0), n = (sy0 + sin(y1)) / 2;\n\n  // Are the parallels symmetrical around the Equator?\n  if (abs(n) < epsilon) return cylindricalEqualAreaRaw(y0);\n\n  var c = 1 + sy0 * (2 * n - sy0), r0 = sqrt(c) / n;\n\n  function project(x, y) {\n    var r = sqrt(c - 2 * n * sin(y)) / n;\n    return [r * sin(x *= n), r0 - r * cos(x)];\n  }\n\n  project.invert = function(x, y) {\n    var r0y = r0 - y,\n        l = atan2(x, abs(r0y)) * sign(r0y);\n    if (r0y * n < 0)\n      l -= pi * sign(x) * sign(r0y);\n    return [l / n, asin((c - (x * x + r0y * r0y) * n * n) / (2 * n))];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEqualAreaRaw)\n      .scale(155.424)\n      .center([0, 33.6442]);\n}\n","import {asin, cos, sin} from \"../math.js\";\n\nexport function cylindricalEqualAreaRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, sin(phi) / cosPhi0];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, asin(y * cosPhi0)];\n  };\n\n  return forward;\n}\n","import conicEqualArea from \"./conicEqualArea.js\";\n\nexport default function() {\n  return conicEqualArea()\n      .parallels([29.5, 45.5])\n      .scale(1070)\n      .translate([480, 250])\n      .rotate([96, 0])\n      .center([-0.6, 38.7]);\n}\n","import {asin, atan2, cos, sin, sqrt} from \"../math.js\";\n\nexport function azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nexport function azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n","import {asin, sqrt} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nexport default function() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n","import {acos, sin} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nexport default function() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n","import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n","import {abs, atan, atan2, cos, epsilon, halfPi, log, pi, pow, sign, sin, sqrt, tan} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {mercatorRaw} from \"./mercator.js\";\n\nfunction tany(y) {\n  return tan((halfPi + y) / 2);\n}\n\nexport function conicConformalRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : log(cy0 / cos(y1)) / log(tany(y1) / tany(y0)),\n      f = cy0 * pow(tany(y0), n) / n;\n\n  if (!n) return mercatorRaw;\n\n  function project(x, y) {\n    if (f > 0) { if (y < -halfPi + epsilon) y = -halfPi + epsilon; }\n    else { if (y > halfPi - epsilon) y = halfPi - epsilon; }\n    var r = f / pow(tany(y), n);\n    return [r * sin(n * x), f - r * cos(n * x)];\n  }\n\n  project.invert = function(x, y) {\n    var fy = f - y, r = sign(n) * sqrt(x * x + fy * fy),\n      l = atan2(x, abs(fy)) * sign(fy);\n    if (fy * n < 0)\n      l -= pi * sign(x) * sign(fy);\n    return [l / n, 2 * atan(pow(f / r, 1 / n)) - halfPi];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicConformalRaw)\n      .scale(109.5)\n      .parallels([30, 30]);\n}\n","import projection from \"./index.js\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n","import {abs, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {equirectangularRaw} from \"./equirectangular.js\";\n\nexport function conicEquidistantRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : (cy0 - cos(y1)) / (y1 - y0),\n      g = cy0 / n + y0;\n\n  if (abs(n) < epsilon) return equirectangularRaw;\n\n  function project(x, y) {\n    var gy = g - y, nx = n * x;\n    return [gy * sin(nx), g - gy * cos(nx)];\n  }\n\n  project.invert = function(x, y) {\n    var gy = g - y,\n        l = atan2(x, abs(gy)) * sign(gy);\n    if (gy * n < 0)\n      l -= pi * sign(x) * sign(gy);\n    return [l / n, g - sign(n) * sqrt(x * x + gy * gy)];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEquidistantRaw)\n      .scale(131.154)\n      .center([0, 13.9389]);\n}\n","import projection from \"./index.js\";\nimport {abs, asin, cos, epsilon2, sin, sqrt} from \"../math.js\";\n\nvar A1 = 1.340264,\n    A2 = -0.081106,\n    A3 = 0.000893,\n    A4 = 0.003796,\n    M = sqrt(3) / 2,\n    iterations = 12;\n\nexport function equalEarthRaw(lambda, phi) {\n  var l = asin(M * sin(phi)), l2 = l * l, l6 = l2 * l2 * l2;\n  return [\n    lambda * cos(l) / (M * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2))),\n    l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2))\n  ];\n}\n\nequalEarthRaw.invert = function(x, y) {\n  var l = y, l2 = l * l, l6 = l2 * l2 * l2;\n  for (var i = 0, delta, fy, fpy; i < iterations; ++i) {\n    fy = l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2)) - y;\n    fpy = A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2);\n    l -= delta = fy / fpy, l2 = l * l, l6 = l2 * l2 * l2;\n    if (abs(delta) < epsilon2) break;\n  }\n  return [\n    M * x * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2)) / cos(l),\n    asin(sin(l) / M)\n  ];\n};\n\nexport default function() {\n  return projection(equalEarthRaw)\n      .scale(177.158);\n}\n","import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function gnomonicRaw(x, y) {\n  var cy = cos(y), k = cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\ngnomonicRaw.invert = azimuthalInvert(atan);\n\nexport default function() {\n  return projection(gnomonicRaw)\n      .scale(144.049)\n      .clipAngle(60);\n}\n","import projection from \"./index.js\";\nimport {abs, epsilon} from \"../math.js\";\n\nexport function naturalEarth1Raw(lambda, phi) {\n  var phi2 = phi * phi, phi4 = phi2 * phi2;\n  return [\n    lambda * (0.8707 - 0.131979 * phi2 + phi4 * (-0.013791 + phi4 * (0.003971 * phi2 - 0.001529 * phi4))),\n    phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4)))\n  ];\n}\n\nnaturalEarth1Raw.invert = function(x, y) {\n  var phi = y, i = 25, delta;\n  do {\n    var phi2 = phi * phi, phi4 = phi2 * phi2;\n    phi -= delta = (phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4))) - y) /\n        (1.007226 + phi2 * (0.015085 * 3 + phi4 * (-0.044475 * 7 + 0.028874 * 9 * phi2 - 0.005916 * 11 * phi4)));\n  } while (abs(delta) > epsilon && --i > 0);\n  return [\n    x / (0.8707 + (phi2 = phi * phi) * (-0.131979 + phi2 * (-0.013791 + phi2 * phi2 * phi2 * (0.003971 - 0.001529 * phi2)))),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(naturalEarth1Raw)\n      .scale(175.295);\n}\n","import {asin, cos, epsilon, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function orthographicRaw(x, y) {\n  return [cos(y) * sin(x), sin(y)];\n}\n\northographicRaw.invert = azimuthalInvert(asin);\n\nexport default function() {\n  return projection(orthographicRaw)\n      .scale(249.5)\n      .clipAngle(90 + epsilon);\n}\n","import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function stereographicRaw(x, y) {\n  var cy = cos(y), k = 1 + cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\nstereographicRaw.invert = azimuthalInvert(function(z) {\n  return 2 * atan(z);\n});\n\nexport default function() {\n  return projection(stereographicRaw)\n      .scale(250)\n      .clipAngle(142);\n}\n","import {atan, exp, halfPi, log, tan} from \"../math.js\";\nimport {mercatorProjection} from \"./mercator.js\";\n\nexport function transverseMercatorRaw(lambda, phi) {\n  return [log(tan((halfPi + phi) / 2)), -lambda];\n}\n\ntransverseMercatorRaw.invert = function(x, y) {\n  return [-y, 2 * atan(exp(x)) - halfPi];\n};\n\nexport default function() {\n  var m = mercatorProjection(transverseMercatorRaw),\n      center = m.center,\n      rotate = m.rotate;\n\n  m.center = function(_) {\n    return arguments.length ? center([-_[1], _[0]]) : (_ = center(), [_[1], -_[0]]);\n  };\n\n  m.rotate = function(_) {\n    return arguments.length ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate(), [_[0], _[1], _[2] - 90]);\n  };\n\n  return rotate([0, 0, 90])\n      .scale(159.155);\n}\n","import clipRectangle from \"./rectangle.js\";\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 960,\n      y1 = 500,\n      cache,\n      cacheStream,\n      clip;\n\n  return clip = {\n    stream: function(stream) {\n      return cache && cacheStream === stream ? cache : cache = clipRectangle(x0, y0, x1, y1)(cacheStream = stream);\n    },\n    extent: function(_) {\n      return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], cache = cacheStream = null, clip) : [[x0, y0], [x1, y1]];\n    }\n  };\n}\n","import {asin, atan2, cos, degrees, haversin, radians, sin, sqrt} from \"./math.js\";\n\nexport default function(a, b) {\n  var x0 = a[0] * radians,\n      y0 = a[1] * radians,\n      x1 = b[0] * radians,\n      y1 = b[1] * radians,\n      cy0 = cos(y0),\n      sy0 = sin(y0),\n      cy1 = cos(y1),\n      sy1 = sin(y1),\n      kx0 = cy0 * cos(x0),\n      ky0 = cy0 * sin(x0),\n      kx1 = cy1 * cos(x1),\n      ky1 = cy1 * sin(x1),\n      d = 2 * asin(sqrt(haversin(y1 - y0) + cy0 * cy1 * haversin(x1 - x0))),\n      k = sin(d);\n\n  var interpolate = d ? function(t) {\n    var B = sin(t *= d) / k,\n        A = sin(d - t) / k,\n        x = A * kx0 + B * kx1,\n        y = A * ky0 + B * ky1,\n        z = A * sy0 + B * sy1;\n    return [\n      atan2(y, x) * degrees,\n      atan2(z, sqrt(x * x + y * y)) * degrees\n    ];\n  } : function() {\n    return [x0 * degrees, y0 * degrees];\n  };\n\n  interpolate.distance = d;\n\n  return interpolate;\n}\n","import {epsilon} from \"../math.js\";\nimport albers from \"./albers.js\";\nimport conicEqualArea from \"./conicEqualArea.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\n\n// The projections must have mutually exclusive clip regions on the sphere,\n// as this will avoid emitting interleaving lines and polygons.\nfunction multiplex(streams) {\n  var n = streams.length;\n  return {\n    point: function(x, y) { var i = -1; while (++i < n) streams[i].point(x, y); },\n    sphere: function() { var i = -1; while (++i < n) streams[i].sphere(); },\n    lineStart: function() { var i = -1; while (++i < n) streams[i].lineStart(); },\n    lineEnd: function() { var i = -1; while (++i < n) streams[i].lineEnd(); },\n    polygonStart: function() { var i = -1; while (++i < n) streams[i].polygonStart(); },\n    polygonEnd: function() { var i = -1; while (++i < n) streams[i].polygonEnd(); }\n  };\n}\n\n// A composite projection for the United States, configured by default for\n// 960×500. The projection also works quite well at 960×600 if you change the\n// scale to 1285 and adjust the translate accordingly. The set of standard\n// parallels for each region comes from USGS, which is published here:\n// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers\nexport default function() {\n  var cache,\n      cacheStream,\n      lower48 = albers(), lower48Point,\n      alaska = conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, // EPSG:3338\n      hawaii = conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, // ESRI:102007\n      point, pointStream = {point: function(x, y) { point = [x, y]; }};\n\n  function albersUsa(coordinates) {\n    var x = coordinates[0], y = coordinates[1];\n    return point = null,\n        (lower48Point.point(x, y), point)\n        || (alaskaPoint.point(x, y), point)\n        || (hawaiiPoint.point(x, y), point);\n  }\n\n  albersUsa.invert = function(coordinates) {\n    var k = lower48.scale(),\n        t = lower48.translate(),\n        x = (coordinates[0] - t[0]) / k,\n        y = (coordinates[1] - t[1]) / k;\n    return (y >= 0.120 && y < 0.234 && x >= -0.425 && x < -0.214 ? alaska\n        : y >= 0.166 && y < 0.234 && x >= -0.214 && x < -0.115 ? hawaii\n        : lower48).invert(coordinates);\n  };\n\n  albersUsa.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);\n  };\n\n  albersUsa.precision = function(_) {\n    if (!arguments.length) return lower48.precision();\n    lower48.precision(_), alaska.precision(_), hawaii.precision(_);\n    return reset();\n  };\n\n  albersUsa.scale = function(_) {\n    if (!arguments.length) return lower48.scale();\n    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);\n    return albersUsa.translate(lower48.translate());\n  };\n\n  albersUsa.translate = function(_) {\n    if (!arguments.length) return lower48.translate();\n    var k = lower48.scale(), x = +_[0], y = +_[1];\n\n    lower48Point = lower48\n        .translate(_)\n        .clipExtent([[x - 0.455 * k, y - 0.238 * k], [x + 0.455 * k, y + 0.238 * k]])\n        .stream(pointStream);\n\n    alaskaPoint = alaska\n        .translate([x - 0.307 * k, y + 0.201 * k])\n        .clipExtent([[x - 0.425 * k + epsilon, y + 0.120 * k + epsilon], [x - 0.214 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    hawaiiPoint = hawaii\n        .translate([x - 0.205 * k, y + 0.212 * k])\n        .clipExtent([[x - 0.214 * k + epsilon, y + 0.166 * k + epsilon], [x - 0.115 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    return reset();\n  };\n\n  albersUsa.fitExtent = function(extent, object) {\n    return fitExtent(albersUsa, extent, object);\n  };\n\n  albersUsa.fitSize = function(size, object) {\n    return fitSize(albersUsa, size, object);\n  };\n\n  albersUsa.fitWidth = function(width, object) {\n    return fitWidth(albersUsa, width, object);\n  };\n\n  albersUsa.fitHeight = function(height, object) {\n    return fitHeight(albersUsa, height, object);\n  };\n\n  function reset() {\n    cache = cacheStream = null;\n    return albersUsa;\n  }\n\n  return albersUsa.scale(1070);\n}\n","import clipRectangle from \"../clip/rectangle.js\";\nimport identity from \"../identity.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport {cos, degrees, radians, sin} from \"../math.js\";\n\nexport default function() {\n  var k = 1, tx = 0, ty = 0, sx = 1, sy = 1, // scale, translate and reflect\n      alpha = 0, ca, sa, // angle\n      x0 = null, y0, x1, y1, // clip extent\n      kx = 1, ky = 1,\n      transform = transformer({\n        point: function(x, y) {\n          var p = projection([x, y])\n          this.stream.point(p[0], p[1]);\n        }\n      }),\n      postclip = identity,\n      cache,\n      cacheStream;\n\n  function reset() {\n    kx = k * sx;\n    ky = k * sy;\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  function projection (p) {\n    var x = p[0] * kx, y = p[1] * ky;\n    if (alpha) {\n      var t = y * ca - x * sa;\n      x = x * ca + y * sa;\n      y = t;\n    }    \n    return [x + tx, y + ty];\n  }\n  projection.invert = function(p) {\n    var x = p[0] - tx, y = p[1] - ty;\n    if (alpha) {\n      var t = y * ca + x * sa;\n      x = x * ca - y * sa;\n      y = t;\n    }\n    return [x / kx, y / ky];\n  };\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transform(postclip(cacheStream = stream));\n  };\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, reset()) : k;\n  };\n  projection.translate = function(_) {\n    return arguments.length ? (tx = +_[0], ty = +_[1], reset()) : [tx, ty];\n  }\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, sa = sin(alpha), ca = cos(alpha), reset()) : alpha * degrees;\n  };\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, reset()) : sx < 0;\n  };\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, reset()) : sy < 0;\n  };\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  return projection;\n}\n","<script>\n\timport { getContext } from 'svelte';\n\timport * as geo from 'd3-geo';\n\timport { scaleThreshold } from 'd3-scale';\n\timport { Svg, Html } from 'layercake';\n  import { format } from \"d3-format\";\n  import { range, cross } from 'd3-array';\n  const numFormat = format(\",.0f\");\n\n\tconst { data, width, height } = getContext('LayerCake');\n\n\texport let projectionName = 'geoAlbersUsa';\n\n\t/* --------------------------------------------\n\t * Add this in case you want to plot only a subset of the features\n\t * while keeping the zoom on the whole geojson feature set\n\t */\n\texport let features = $data.features;\n\texport let layerData = [];\n\texport let selectedDomain = [0, 50, 100];\n\texport let colors = [\"#fff\", \"#ccc\", \"#000\"];\n  export let mapField = \"lad19cd\";\n  export let dataField = \"code\";\n\texport let fields = [\n\t\t\t{key: \"Area\", value: \"areaName\"},\n\t\t\t{key: \"Deaths\", value: \"value\"},\n\t];\n\texport let legendConfig = {};\n\n\t$: colorScale = scaleThreshold().range(colors).domain(selectedDomain);\n\n\t$: projection = geo[projectionName]()\n\t\t.fitSize([$width, $height], $data);\n\n\t$: geoPath = geo.geoPath(projection);\n\n\t$: getValue = (feature) => {\n\t\tconst lookup = layerData.filter(d => d[dataField] === feature.properties[mapField]);\n\t\tconst { name, value } = lookup.length > 0 ? lookup[0] : { value: 0 };\n\t\treturn fields.map(d => {\n\t\t\treturn {\n\t\t\t\tkey: d.key,\n\t\t\t\tvalue: lookup[0][d.value]\n\t\t\t}\n\t\t})\n\t};\n\n\t$: fillPath = (feature) => {\n\t\tconst lookup = layerData.filter(d => d[dataField] === feature.properties[mapField]);\n\t\tconst { color } = lookup.length > 0 ? lookup[0] : { color: \"#ccc\" };\n\t\treturn color;\n\t};\n\n\tlet tooltipX = 0;\n\tlet tooltipY = 0;\n\tlet tooltipContent = {};\n\n\t$: enter = (feature) => {\n\t\tif(feature) {\n\t\t\tconst d = feature.properties;\n\t\t\tconst point = geoPath.centroid(feature);\n\t\t\ttooltipContent = getValue(feature);\n\t\t\ttooltipX = point[0];\n\t\t\ttooltipY = point[1] + 20;\n\t\t\tvisible = true;\n\t\t}\n\t}\n\n\tfunction exit (feature) {\n\t\tvisible = false;\n\t\ttooltipContent = {};\n\t}\n\n\tlet visible = false;\n\n\tfunction setContents(result) {\n    if (Object.keys(result).length === 0) return '';\n\n\t\treturn `\n\t\t\t${result.map((row, i) => `<div transform=\"translate(0, ${i * 30})\">\n\t\t\t<span style=\"color: #999; width: 85px;\">${row.key}:</span> \n\t\t\t<span>${row.value}${i > 0 ? \"%\" :\"\"}</span></div>`).join('')}`;\n\t}\n\t\n\tconst { n } = legendConfig;\n\tconst k = 24;\n\tconst labels = [\"low\", \"\", \"high\"];\n\tconst title = [\"Car ownership\", \"Election result\"];\n</script>\n\n<Svg>\n\t<g class=\"map-group\">\n\t\t{#each features as feature}\n\t\t\t<path\n\t\t\t\tclass=\"feature-path\"\n\t\t\t\tfill=\"{fillPath(feature)}\"\n\t\t\t\td=\"{geoPath(feature)}\"\n\t\t\t\ton:mouseenter=\"{enter(feature)}\" \n\t\t\t\ton:mouseout=\"{exit(feature)}\"\n\t\t\t>\n\t\t\t</path>\n\t\t{/each}\n\t</g>\n\t<g class=\"legend svelte-1fmz02g\" transform=\"translate({$width - 66},60)\"><g transform=\"translate(-36,-36) rotate(-45 36,36)\">\n\t<marker id=\"arrow_1\" markerHeight=\"10\" markerWidth=\"10\" refX=\"6\" refY=\"3\" orient=\"auto\">\n\t<path d=\"M0,0L9,3L0,6Z\"></path></marker>\n\t<rect width=\"24\" height=\"24\" y=\"48\" fill=\"#e8e8e8\" x=\"0\"></rect>\n\t<rect width=\"24\" height=\"24\" x=\"0\" y=\"24\" fill=\"#b0d5df\">\n<title>Car ownership\nElection result (low)</title>\n</rect><rect width=\"24\" height=\"24\" x=\"0\" y=\"0\" fill=\"#64acbe\">\n<title>Car ownership (high)\nElection result (low)</title>\n</rect><rect width=\"24\" height=\"24\" x=\"24\" y=\"48\" fill=\"#e4acac\">\n<title>Car ownership (low)\nElection result</title>\n</rect><rect width=\"24\" height=\"24\" x=\"24\" y=\"24\" fill=\"#ad9ea5\">\n<title>Car ownership\nElection result</title>\n</rect><rect width=\"24\" height=\"24\" x=\"24\" y=\"0\" fill=\"#627f8c\">\n<title>Car ownership (high)\nElection result</title>\n</rect><rect width=\"24\" height=\"24\" x=\"48\" y=\"48\" fill=\"#c85a5a\">\n<title>Car ownership (low)\nElection result (high)</title>\n</rect><rect width=\"24\" height=\"24\" x=\"48\" y=\"24\" fill=\"#985356\">\n<title>Car ownership\nElection result (high)</title>\n</rect><rect width=\"24\" height=\"24\" x=\"48\" y=\"0\" fill=\"#574249\">\n<title>Car ownership (high)\nElection result (high)</title>\n</rect>\n<line marker-end=\"#arrow_1\" x1=\"0\" x2=\"72\" y1=\"72\" y2=\"72\" stroke=\"black\" stroke-width=\"1.5\"></line><line marker-end=\"#arrow_1\" y2=\"0\" y1=\"72\" stroke=\"black\" stroke-width=\"1.5\"></line><text font-weight=\"bold\" dy=\"0.71em\" transform=\"rotate(90) translate(36,6)\" text-anchor=\"middle\">Car ownership</text><text font-weight=\"bold\" dy=\"0.71em\" transform=\"translate(36,78)\" text-anchor=\"middle\">Election result</text></g></g>\n</Svg>\n\n<div class=\"tooltip\" style=\"display:{visible ? \"block\" : \"none\"}; top: {tooltipY}px; left: {tooltipX}px\">\n\t{@html setContents(tooltipContent)}\n</div>\n\n<style>\n\t.feature-path {\n\t\tstroke: #333;\n\t\tstroke-width: 0.5px;\n\t}\n\n\t.legend {\n\t\tfont-size: 10px;\n\t}\n\n\t.tooltip {\n\t\tfont-size: 0.75em;\n    position: absolute;\n    font-size: 13px;\n    pointer-events: none;\n    border: 1px solid #ccc;\n    background: rgba(255, 255, 255, 0.85);\n    padding: 5px;\n    transition: left 250ms ease-out, top 250ms ease-out;\n\t\tz-index: 15;\n\t\ttop: 16px;\n\t\tleft: 16px;\n\t}\n</style>\n","import {bisect} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","<script>\n\timport { getContext, createEventDispatcher } from 'svelte';\n  import { format } from \"d3-format\";\n\n  export let pymChild = {};\n\n\tconst dispatch = createEventDispatcher();\n\n\tfunction setSearch() {\n    searchTerm = event.target.value;\n  \n\t\tdispatch('message', {\n\t\t\ttext: searchTerm,\n\t\t});\n\t}\n  const defNum = format(\",.0f\");\n\n  export let data = [\n    {key: \"1979\", value: 2},\n    {key: \"1983\", value: 18}\n  ];\n  export let headers = Object.keys(data[0]).map(d => ({key: d, title: d}));\n  export let sortField = \"value\";\n  export let keyField = \"key\";\n  export let keys = data.map(d => d[keyField]);\n  export let tableId = \"key-list\";\n  export let enableSearch = false;\n  export let defaultOpen = false;\n  export let searchTerm = \"\";\n  export let autoSort = true;\n  export let sliceSize = 10;\n  const sliceMid = sliceSize / 2;\n\n  function updateHeight() {\n    setTimeout(() => {\n      pymChild.sendHeight()\n    }, 50);\n  }\n\n  function doSort(b, a) {\n    if(autoSort) {\n      return b[sortField] - a[sortField]\n    }\n  }\n\n  data = data.sort(doSort);\n\n  $: searchIdx = data.map(d => d[keyField]).indexOf(searchTerm);\n  $: filteredData = (searchTerm === \"\" || searchIdx < sliceMid) ? data.slice(0, sliceSize) : data.slice(searchIdx - sliceMid, searchIdx + sliceMid);\n</script>\n\n<details on:click={() => updateHeight()} open={defaultOpen === true ? 'open' : ''}>\n<summary style=\"{defaultOpen === true ? \"display: none;\" : \"\"}\"><span>See table</span></summary>\n{#if enableSearch}\n<input bind:value={searchTerm} on:change={(evt) => setSearch(evt)} list=\"{tableId}\"><button on:click={() => (searchTerm = \"\")}>Clear</button>\n<datalist id=\"{tableId}\">\n  {#each keys as key}\n    <option value=\"{key}\">{key}</option>\n  {/each}\n</datalist>\n{/if}\n<table>\n  <thead>\n    <tr>\n      {#each headers as header}\n      <td class={header.type === \"number\" || header.key === \"value\" ? \"number\" : \"\"}>{header.title}</td>\n      {/each}\n    </tr>\n  </thead>\n  {#each filteredData.sort(doSort) as row}\n    <tr class=\"{row[keyField] === searchTerm ? \"bold\" : \"\"}\">\n      {#each headers as header}\n        <td class={header.type === \"number\" || header.key === \"value\" ? \"number\" : \"\"}>\n          {#if row[header.key] === \"null\"}\n            No data\n          {/if}\n          {#if row[header.key] !== \"null\"}\n            {(header.type === \"number\") ? defNum(row[header.key]) : row[header.key]}\n          {/if}\n        </td>\n      {/each}\n    </tr>\n  {/each}\n</table>\n</details>\n\n<style>\n  table {\n    width: 100%;\n    border-collapse: collapse;\n  }\n\n  tr:nth-child(odd) {\n    background: #e7efff;\n  }\n\n  thead {\n    font-weight: bold;\n  }\n\n  td {\n    padding: 2px 4px;\n    max-width: 25%;\n  }\n\n  .bold {\n    font-weight: bold;\n  }\n\n  .number {\n    text-align: right;\n  }\n\n  summary {    \n    width: max-content;\n    border: 1px solid #333;\n    background-color: #f4f4f4;\n    padding: 0 4px;\n  }\n  span {\n    padding: 4px;\n    display: inline-block;\n  }\n\n  details {\n    position: relative;\n    top: -30px;\n  }\n\n  summary {\n    float: right;\n  }\n\n  @media (max-width: 600px) {\n    summary {\n      float: none;\n    }\n\n    details {\n      top: 0;\n    }\n  }\n</style>","<script>\n  import { LayerCake, Canvas, Svg, Html } from 'layercake';\n  import { feature } from 'topojson';\n  import { geoMercator } from 'd3-geo';\n  import { scaleQuantile } from 'd3-scale';\n  import { range } from 'd3-array';\n  import { format } from \"d3-format\";\n\n  import geojson from '../data/arrondissements.geo.json';\n  import csvData from '../data/Paris arrondissement data - Sheet1.csv';\n\n  import ChoroMap from './choromap.svelte';\n  import SearchTable from \"./search_table.svelte\";\n\n  export let title = \"Placeholder\";\n  export let subtitle = \"Placeholder\";\n  export let pymChild = {};\n\n  const colors = [\n    \"#e8e8e8\", \"#e4acac\", \"#c85a5a\",\n    \"#b0d5df\", \"#ad9ea5\", \"#985356\",\n    \"#64acbe\", \"#627f8c\", \"#574249\"\n  ];\n\n  const n = Math.floor(Math.sqrt(colors.length));\n  const x = scaleQuantile(csvData.map(d => d.perc_car), range(n));\n  const y = scaleQuantile(csvData.map(d => d.election_result), range(n));\n  const formatNum = format(\",.1f\");\n\n  function getColor(value) {\n    console.log(value);\n    if (!value) return \"#ccc\";\n    let [a, b] = value;\n    return colors[y(b) + x(a) * n];\n  };\n\n  let layerData = csvData.map(d => ({\n    ...d,\n    region_id: +d.region_id,\n    color: getColor([+d.perc_car, +d.election_result]),\n    election_result: formatNum(+d.election_result)\n  }));\n\n  console.log(layerData);\n</script>\n\n<style>\n  .svg-container {\n    width: 100%;\n    height: 600px;\n  }\n  .map-container {\n    position: relative;\n  }\n\n  @media (max-width: 600px) {\n    .svg-container {\n      height: 400px;\n    }\n  }\n</style>\n\n  <div class=\"chart-container\">\n<h3>{title}</h3>\n<h4>Anne Hidalgo vote (%) against car ownership (%)</h4>\n<div class=\"map-container\">\n  <div class=\"svg-container\">\n    <LayerCake\n      data={geojson}\n      custom={{layerData: layerData}}\n    >\n      <ChoroMap\n        projectionName={'geoMercator'}\n        {layerData}\n        {colors}\n        mapField=\"c_ar\"\n        dataField=\"region_id\"\n        fields={[\n          {key: \"Region\", value: \"region_name\"},\n          {key: \"Car ownership\", value: \"perc_car\"},\n          {key: \"Hidalgo vote\", value: \"election_result\"}\n        ]}\n        legendConfig={\n          {n}\n        }\n      />\n    </LayerCake>\n  </div>\n</div>\n<div class=\"source-text\">The central four arrondissements voted as one.<br>Source: <a href=\"https://www.insee.fr/fr/statistiques/2011101?geo=COM-75101\">INSEE</a>. Base map: <a href=\"https://www.data.gouv.fr/en/datasets/arrondissements-1/\">data.gouv.fr</a></div>\n<SearchTable \n  data={layerData}\n  sliceSize={20}\n  {pymChild}\n  headers={[\n    {title: \"Arrondissement\", key: \"region_id\"},\n    {title: \"Name\", key: \"region_name\"},\n    {title: \"Car ownership (%)\", key: \"perc_car\"},\n    {title: \"Hidalgo vote (%)\", key: \"election_result\"}\n  ]}\n/>\n</div>","<script>\n  import { onMount } from 'svelte';\n\n  import Map from \"./graphics/map.svelte\";\n\n  export let pymChild = {};\n  export let styleNs = false; // serif or san-serif;\n  export let title = \"Paris municipal elections (second round result)\";\n  export let subtitle = \"Anne Hidalgo vote (%) against car ownership (%)\";\n\n\tonMount(() => {\n\t\t\tpymChild.sendHeight();\n  });\n\n</script>\n\n<svelte:head>\n  <title>{title}</title>\n  <link\n  href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700&display=swap\"\n  rel=\"stylesheet\" />\n</svelte:head>\n\n<div class=\"embed-container\" class:styleNs>\n  <Map {title} {subtitle} {pymChild} />\n</div>\n\n<style>\n  .embed-container.styleNs {\n    font-family: \"Source Sans Pro\", serif; /* catch IE not loading fonts */\n  }\n\n  .embed-container {\n    width: 100%;\n    max-width: 900px;\n    box-sizing: border-box;\n  }\n\n  :global(.chart-container) {\n    width: 100%;\n    padding: 8px;\n    border-top: 1px solid black;\n    border-bottom: 1px solid black;\n    box-sizing: border-box;\n    margin-bottom: 8px;\n  }\n\n  :global(.source-text) {\n    color: #607a8a;\n    margin: 8px 0;\n    font-size: 0.75em;\n\t}\n\t\n\t:global(button) {\n\t\tmargin: 4px;\n\t}\n\n  :global(h3) {\n\t\tmargin: 0;\n\t\tpadding: 0;\n  }\n  \n  :global(h4) {\n\t\tmargin: 0;\n    padding: 0;\n    color: #c1002a;\n    font-weight: normal;\n  }\n</style>\n","import App from './App.svelte';\nimport  * as pym from 'pym.js';\n\nlet pymChild = new pym.default.Child();\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tpymChild\n\t}\n});\n\nexport default app;","/*! pym.js - v1.3.2 - 2018-02-13 */\n/*\n* Pym.js is library that resizes an iframe based on the width of the parent and the resulting height of the child.\n* Check out the docs at http://blog.apps.npr.org/pym.js/ or the readme at README.md for usage.\n*/\n\n/** @module pym */\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(factory);\n    }\n    else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = factory();\n    } else {\n        window.pym = factory.call(this);\n    }\n})(function() {\n    var MESSAGE_DELIMITER = 'xPYMx';\n\n    var lib = {};\n\n    /**\n    * Create and dispatch a custom pym event\n    *\n    * @method _raiseCustomEvent\n    * @inner\n    *\n    * @param {String} eventName\n    */\n   var _raiseCustomEvent = function(eventName) {\n     var event = document.createEvent('Event');\n     event.initEvent('pym:' + eventName, true, true);\n     document.dispatchEvent(event);\n   };\n\n    /**\n    * Generic function for parsing URL params.\n    * Via http://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript\n    *\n    * @method _getParameterByName\n    * @inner\n    *\n    * @param {String} name The name of the paramter to get from the URL.\n    */\n    var _getParameterByName = function(name) {\n        var regex = new RegExp(\"[\\\\?&]\" + name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]') + '=([^&#]*)');\n        var results = regex.exec(location.search);\n\n        if (results === null) {\n            return '';\n        }\n\n        return decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    };\n\n    /**\n     * Check the message to make sure it comes from an acceptable xdomain.\n     * Defaults to '*' but can be overriden in config.\n     *\n     * @method _isSafeMessage\n     * @inner\n     *\n     * @param {Event} e The message event.\n     * @param {Object} settings Configuration.\n     */\n    var _isSafeMessage = function(e, settings) {\n        if (settings.xdomain !== '*') {\n            // If origin doesn't match our xdomain, return.\n            if (!e.origin.match(new RegExp(settings.xdomain + '$'))) { return; }\n        }\n\n        // Ignore events that do not carry string data #151\n        if (typeof e.data !== 'string') { return; }\n\n        return true;\n    };\n\n    var _isSafeUrl = function(url) {\n        // Adapted from angular 2 url sanitizer\n        var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/gi;\n        if (!url.match(SAFE_URL_PATTERN)) { return; }\n        \n        return true;\n    };\n\n    /**\n     * Construct a message to send between frames.\n     *\n     * NB: We use string-building here because JSON message passing is\n     * not supported in all browsers.\n     *\n     * @method _makeMessage\n     * @inner\n     *\n     * @param {String} id The unique id of the message recipient.\n     * @param {String} messageType The type of message to send.\n     * @param {String} message The message to send.\n     */\n    var _makeMessage = function(id, messageType, message) {\n        var bits = ['pym', id, messageType, message];\n\n        return bits.join(MESSAGE_DELIMITER);\n    };\n\n    /**\n     * Construct a regex to validate and parse messages.\n     *\n     * @method _makeMessageRegex\n     * @inner\n     *\n     * @param {String} id The unique id of the message recipient.\n     */\n    var _makeMessageRegex = function(id) {\n        var bits = ['pym', id, '(\\\\S+)', '(.*)'];\n\n        return new RegExp('^' + bits.join(MESSAGE_DELIMITER) + '$');\n    };\n\n    /**\n    * Underscore implementation of getNow\n    *\n    * @method _getNow\n    * @inner\n    *\n    */\n    var _getNow = Date.now || function() {\n        return new Date().getTime();\n    };\n\n    /**\n    * Underscore implementation of throttle\n    *\n    * @method _throttle\n    * @inner\n    *\n    * @param {function} func Throttled function\n    * @param {number} wait Throttle wait time\n    * @param {object} options Throttle settings\n    */\n\n    var _throttle = function(func, wait, options) {\n        var context, args, result;\n        var timeout = null;\n        var previous = 0;\n        if (!options) {options = {};}\n        var later = function() {\n            previous = options.leading === false ? 0 : _getNow();\n            timeout = null;\n            result = func.apply(context, args);\n            if (!timeout) {context = args = null;}\n        };\n        return function() {\n            var now = _getNow();\n            if (!previous && options.leading === false) {previous = now;}\n            var remaining = wait - (now - previous);\n            context = this;\n            args = arguments;\n            if (remaining <= 0 || remaining > wait) {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                }\n                previous = now;\n                result = func.apply(context, args);\n                if (!timeout) {context = args = null;}\n            } else if (!timeout && options.trailing !== false) {\n                timeout = setTimeout(later, remaining);\n            }\n            return result;\n        };\n    };\n\n    /**\n     * Clean autoInit Instances: those that point to contentless iframes\n     * @method _cleanAutoInitInstances\n     * @inner\n     */\n    var _cleanAutoInitInstances = function() {\n        var length = lib.autoInitInstances.length;\n\n        // Loop backwards to avoid index issues\n        for (var idx = length - 1; idx >= 0; idx--) {\n            var instance = lib.autoInitInstances[idx];\n            // If instance has been removed or is contentless then remove it\n            if (instance.el.getElementsByTagName('iframe').length &&\n                instance.el.getElementsByTagName('iframe')[0].contentWindow) {\n                continue;\n            }\n            else {\n                // Remove the reference to the removed or orphan instance\n                lib.autoInitInstances.splice(idx,1);\n            }\n        }\n    };\n\n    /**\n     * Store auto initialized Pym instances for further reference\n     * @name module:pym#autoInitInstances\n     * @type Array\n     * @default []\n     */\n    lib.autoInitInstances = [];\n\n    /**\n     * Initialize Pym for elements on page that have data-pym attributes.\n     * Expose autoinit in case we need to call it from the outside\n     * @instance\n     * @method autoInit\n     * @param {Boolean} doNotRaiseEvents flag to avoid sending custom events\n     */\n    lib.autoInit = function(doNotRaiseEvents) {\n        var elements = document.querySelectorAll('[data-pym-src]:not([data-pym-auto-initialized])');\n        var length = elements.length;\n\n        // Clean stored instances in case needed\n        _cleanAutoInitInstances();\n        for (var idx = 0; idx < length; ++idx) {\n            var element = elements[idx];\n            /*\n            * Mark automatically-initialized elements so they are not\n            * re-initialized if the user includes pym.js more than once in the\n            * same document.\n            */\n            element.setAttribute('data-pym-auto-initialized', '');\n\n            // Ensure elements have an id\n            if (element.id === '') {\n                element.id = 'pym-' + idx + \"-\" + Math.random().toString(36).substr(2,5);\n            }\n\n            var src = element.getAttribute('data-pym-src');\n\n            // List of data attributes to configure the component\n            // structure: {'attribute name': 'type'}\n            var settings = {'xdomain': 'string', 'title': 'string', 'name': 'string', 'id': 'string',\n                            'sandbox': 'string', 'allowfullscreen': 'boolean',\n                            'parenturlparam': 'string', 'parenturlvalue': 'string',\n                            'optionalparams': 'boolean', 'trackscroll': 'boolean',\n                            'scrollwait': 'number'};\n\n            var config = {};\n\n            for (var attribute in settings) {\n                // via https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute#Notes\n               if (element.getAttribute('data-pym-'+attribute) !== null) {\n                  switch (settings[attribute]) {\n                    case 'boolean':\n                       config[attribute] = !(element.getAttribute('data-pym-'+attribute) === 'false'); // jshint ignore:line\n                       break;\n                    case 'string':\n                       config[attribute] = element.getAttribute('data-pym-'+attribute);\n                       break;\n                    case 'number':\n                        var n = Number(element.getAttribute('data-pym-'+attribute));\n                        if (!isNaN(n)) {\n                            config[attribute] = n;\n                        }\n                        break;\n                    default:\n                       console.err('unrecognized attribute type');\n                  }\n               }\n            }\n\n            // Store references to autoinitialized pym instances\n            var parent = new lib.Parent(element.id, src, config);\n            lib.autoInitInstances.push(parent);\n        }\n\n        // Fire customEvent\n        if (!doNotRaiseEvents) {\n            _raiseCustomEvent(\"pym-initialized\");\n        }\n        // Return stored autoinitalized pym instances\n        return lib.autoInitInstances;\n    };\n\n    /**\n     * The Parent half of a response iframe.\n     *\n     * @memberof module:pym\n     * @class Parent\n     * @param {String} id The id of the div into which the iframe will be rendered. sets {@link module:pym.Parent~id}\n     * @param {String} url The url of the iframe source. sets {@link module:pym.Parent~url}\n     * @param {Object} [config] Configuration for the parent instance. sets {@link module:pym.Parent~settings}\n     * @param {string} [config.xdomain='*'] - xdomain to validate messages received\n     * @param {string} [config.title] - if passed it will be assigned to the iframe title attribute\n     * @param {string} [config.name] - if passed it will be assigned to the iframe name attribute\n     * @param {string} [config.id] - if passed it will be assigned to the iframe id attribute\n     * @param {boolean} [config.allowfullscreen] - if passed and different than false it will be assigned to the iframe allowfullscreen attribute\n     * @param {string} [config.sandbox] - if passed it will be assigned to the iframe sandbox attribute (we do not validate the syntax so be careful!!)\n     * @param {string} [config.parenturlparam] - if passed it will be override the default parentUrl query string parameter name passed to the iframe src\n     * @param {string} [config.parenturlvalue] - if passed it will be override the default parentUrl query string parameter value passed to the iframe src\n     * @param {string} [config.optionalparams] - if passed and different than false it will strip the querystring params parentUrl and parentTitle passed to the iframe src\n     * @param {boolean} [config.trackscroll] - if passed it will activate scroll tracking on the parent\n     * @param {number} [config.scrollwait] - if passed it will set the throttle wait in order to fire scroll messaging. Defaults to 100 ms.\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe iFrame}\n     */\n    lib.Parent = function(id, url, config) {\n        /**\n         * The id of the container element\n         *\n         * @memberof module:pym.Parent\n         * @member {string} id\n         * @inner\n         */\n        this.id = id;\n        /**\n         * The url that will be set as the iframe's src\n         *\n         * @memberof module:pym.Parent\n         * @member {String} url\n         * @inner\n         */\n        this.url = url;\n\n        /**\n         * The container DOM object\n         *\n         * @memberof module:pym.Parent\n         * @member {HTMLElement} el\n         * @inner\n         */\n        this.el = document.getElementById(id);\n        /**\n         * The contained child iframe\n         *\n         * @memberof module:pym.Parent\n         * @member {HTMLElement} iframe\n         * @inner\n         * @default null\n         */\n        this.iframe = null;\n        /**\n         * The parent instance settings, updated by the values passed in the config object\n         *\n         * @memberof module:pym.Parent\n         * @member {Object} settings\n         * @inner\n         */\n        this.settings = {\n            xdomain: '*',\n            optionalparams: true,\n            parenturlparam: 'parentUrl',\n            parenturlvalue: window.location.href,\n            trackscroll: false,\n            scrollwait: 100,\n        };\n        /**\n         * RegularExpression to validate the received messages\n         *\n         * @memberof module:pym.Parent\n         * @member {String} messageRegex\n         * @inner\n         */\n        this.messageRegex = _makeMessageRegex(this.id);\n        /**\n         * Stores the registered messageHandlers for each messageType\n         *\n         * @memberof module:pym.Parent\n         * @member {Object} messageHandlers\n         * @inner\n         */\n        this.messageHandlers = {};\n\n        // ensure a config object\n        config = (config || {});\n\n        /**\n         * Construct the iframe.\n         *\n         * @memberof module:pym.Parent\n         * @method _constructIframe\n         * @inner\n         */\n        this._constructIframe = function() {\n            // Calculate the width of this element.\n            var width = this.el.offsetWidth.toString();\n\n            // Create an iframe element attached to the document.\n            this.iframe = document.createElement('iframe');\n\n            // Save fragment id\n            var hash = '';\n            var hashIndex = this.url.indexOf('#');\n\n            if (hashIndex > -1) {\n                hash = this.url.substring(hashIndex, this.url.length);\n                this.url = this.url.substring(0, hashIndex);\n            }\n\n            // If the URL contains querystring bits, use them.\n            // Otherwise, just create a set of valid params.\n            if (this.url.indexOf('?') < 0) {\n                this.url += '?';\n            } else {\n                this.url += '&';\n            }\n\n            // Append the initial width as a querystring parameter\n            // and optional params if configured to do so\n            this.iframe.src = this.url + 'initialWidth=' + width +\n                                         '&childId=' + this.id;\n\n            if (this.settings.optionalparams) {\n                this.iframe.src += '&parentTitle=' + encodeURIComponent(document.title);\n                this.iframe.src += '&'+ this.settings.parenturlparam + '=' + encodeURIComponent(this.settings.parenturlvalue);\n            }\n            this.iframe.src +=hash;\n\n            // Set some attributes to this proto-iframe.\n            this.iframe.setAttribute('width', '100%');\n            this.iframe.setAttribute('scrolling', 'no');\n            this.iframe.setAttribute('marginheight', '0');\n            this.iframe.setAttribute('frameborder', '0');\n\n            if (this.settings.title) {\n                this.iframe.setAttribute('title', this.settings.title);\n            }\n\n            if (this.settings.allowfullscreen !== undefined && this.settings.allowfullscreen !== false) {\n                this.iframe.setAttribute('allowfullscreen','');\n            }\n\n            if (this.settings.sandbox !== undefined && typeof this.settings.sandbox === 'string') {\n                this.iframe.setAttribute('sandbox', this.settings.sandbox);\n            }\n\n            if (this.settings.id) {\n                if (!document.getElementById(this.settings.id)) {\n                    this.iframe.setAttribute('id', this.settings.id);\n                }\n            }\n\n            if (this.settings.name) {\n                this.iframe.setAttribute('name', this.settings.name);\n            }\n\n            // Replace the child content if needed\n            // (some CMSs might strip out empty elements)\n            while(this.el.firstChild) { this.el.removeChild(this.el.firstChild); }\n            // Append the iframe to our element.\n            this.el.appendChild(this.iframe);\n\n            // Add an event listener that will handle redrawing the child on resize.\n            window.addEventListener('resize', this._onResize);\n\n            // Add an event listener that will send the child the viewport.\n            if (this.settings.trackscroll) {\n                window.addEventListener('scroll', this._throttleOnScroll);\n            }\n        };\n\n        /**\n         * Send width on resize.\n         *\n         * @memberof module:pym.Parent\n         * @method _onResize\n         * @inner\n         */\n        this._onResize = function() {\n            this.sendWidth();\n            if (this.settings.trackscroll) {\n                this.sendViewportAndIFramePosition();\n            }\n        }.bind(this);\n\n        /**\n         * Send viewport and iframe info on scroll.\n         *\n         * @memberof module:pym.Parent\n         * @method _onScroll\n         * @inner\n         */\n        this._onScroll = function() {\n            this.sendViewportAndIFramePosition();\n        }.bind(this);\n\n        /**\n         * Fire all event handlers for a given message type.\n         *\n         * @memberof module:pym.Parent\n         * @method _fire\n         * @inner\n         *\n         * @param {String} messageType The type of message.\n         * @param {String} message The message data.\n         */\n        this._fire = function(messageType, message) {\n            if (messageType in this.messageHandlers) {\n                for (var i = 0; i < this.messageHandlers[messageType].length; i++) {\n                   this.messageHandlers[messageType][i].call(this, message);\n                }\n            }\n        };\n\n        /**\n         * Remove this parent from the page and unbind it's event handlers.\n         *\n         * @memberof module:pym.Parent\n         * @method remove\n         * @instance\n         */\n        this.remove = function() {\n            window.removeEventListener('message', this._processMessage);\n            window.removeEventListener('resize', this._onResize);\n\n            this.el.removeChild(this.iframe);\n            // _cleanAutoInitInstances in case this parent was autoInitialized\n            _cleanAutoInitInstances();\n        };\n\n        /**\n         * Process a new message from the child.\n         *\n         * @memberof module:pym.Parent\n         * @method _processMessage\n         * @inner\n         *\n         * @param {Event} e A message event.\n         */\n        this._processMessage = function(e) {\n            // First, punt if this isn't from an acceptable xdomain.\n            if (!_isSafeMessage(e, this.settings)) {\n                return;\n            }\n\n            // Discard object messages, we only care about strings\n            if (typeof e.data !== 'string') {\n                return;\n            }\n\n            // Grab the message from the child and parse it.\n            var match = e.data.match(this.messageRegex);\n\n            // If there's no match or too many matches in the message, punt.\n            if (!match || match.length !== 3) {\n                return false;\n            }\n\n            var messageType = match[1];\n            var message = match[2];\n\n            this._fire(messageType, message);\n        }.bind(this);\n\n        /**\n         * Resize iframe in response to new height message from child.\n         *\n         * @memberof module:pym.Parent\n         * @method _onHeightMessage\n         * @inner\n         *\n         * @param {String} message The new height.\n         */\n        this._onHeightMessage = function(message) {\n            /*\n             * Handle parent height message from child.\n             */\n            var height = parseInt(message);\n\n            this.iframe.setAttribute('height', height + 'px');\n        };\n\n        /**\n         * Navigate parent to a new url.\n         *\n         * @memberof module:pym.Parent\n         * @method _onNavigateToMessage\n         * @inner\n         *\n         * @param {String} message The url to navigate to.\n         */\n        this._onNavigateToMessage = function(message) {\n            /*\n             * Handle parent scroll message from child.\n             */\n             if (!_isSafeUrl(message)) {return;}\n            document.location.href = message;\n        };\n\n        /**\n         * Scroll parent to a given child position.\n         *\n         * @memberof module:pym.Parent\n         * @method _onScrollToChildPosMessage\n         * @inner\n         *\n         * @param {String} message The offset inside the child page.\n         */\n        this._onScrollToChildPosMessage = function(message) {\n            // Get the child container position using getBoundingClientRect + pageYOffset\n            // via https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n            var iframePos = document.getElementById(this.id).getBoundingClientRect().top + window.pageYOffset;\n\n            var totalOffset = iframePos + parseInt(message);\n            window.scrollTo(0, totalOffset);\n        };\n\n        /**\n         * Bind a callback to a given messageType from the child.\n         *\n         * Reserved message names are: \"height\", \"scrollTo\" and \"navigateTo\".\n         *\n         * @memberof module:pym.Parent\n         * @method onMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message being listened for.\n         * @param {module:pym.Parent~onMessageCallback} callback The callback to invoke when a message of the given type is received.\n         */\n        this.onMessage = function(messageType, callback) {\n            if (!(messageType in this.messageHandlers)) {\n                this.messageHandlers[messageType] = [];\n            }\n\n            this.messageHandlers[messageType].push(callback);\n        };\n\n        /**\n         * @callback module:pym.Parent~onMessageCallback\n         * @param {String} message The message data.\n         */\n\n        /**\n         * Send a message to the the child.\n         *\n         * @memberof module:pym.Parent\n         * @method sendMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message to send.\n         * @param {String} message The message data to send.\n         */\n        this.sendMessage = function(messageType, message) {\n            // When used alongside with pjax some references are lost\n            if (this.el.getElementsByTagName('iframe').length) {\n                if (this.el.getElementsByTagName('iframe')[0].contentWindow) {\n                    this.el.getElementsByTagName('iframe')[0].contentWindow\n                        .postMessage(_makeMessage(this.id, messageType, message), '*');\n                }\n                else {\n                    // Contentless child detected remove listeners and iframe\n                    this.remove();\n                }\n            }\n        };\n\n        /**\n         * Transmit the current iframe width to the child.\n         *\n         * You shouldn't need to call this directly.\n         *\n         * @memberof module:pym.Parent\n         * @method sendWidth\n         * @instance\n         */\n        this.sendWidth = function() {\n            var width = this.el.offsetWidth.toString();\n            this.sendMessage('width', width);\n        };\n\n        /**\n         * Transmit the current viewport and iframe position to the child.\n         * Sends viewport width, viewport height\n         * and iframe bounding rect top-left-bottom-right\n         * all separated by spaces\n         *\n         * You shouldn't need to call this directly.\n         *\n         * @memberof module:pym.Parent\n         * @method sendViewportAndIFramePosition\n         * @instance\n         */\n        this.sendViewportAndIFramePosition = function() {\n            var iframeRect = this.iframe.getBoundingClientRect();\n            var vWidth   = window.innerWidth || document.documentElement.clientWidth;\n            var vHeight  = window.innerHeight || document.documentElement.clientHeight;\n            var payload = vWidth + ' ' + vHeight;\n            payload += ' ' + iframeRect.top + ' ' + iframeRect.left;\n            payload += ' ' + iframeRect.bottom + ' ' + iframeRect.right;\n            this.sendMessage('viewport-iframe-position', payload);\n        };\n\n        // Add any overrides to settings coming from config.\n        for (var key in config) {\n            this.settings[key] = config[key];\n        }\n\n        /**\n         * Throttled scroll function.\n         *\n         * @memberof module:pym.Parent\n         * @method _throttleOnScroll\n         * @inner\n         */\n        this._throttleOnScroll = _throttle(this._onScroll.bind(this), this.settings.scrollwait);\n\n        // Bind required message handlers\n        this.onMessage('height', this._onHeightMessage);\n        this.onMessage('navigateTo', this._onNavigateToMessage);\n        this.onMessage('scrollToChildPos', this._onScrollToChildPosMessage);\n        this.onMessage('parentPositionInfo', this.sendViewportAndIFramePosition);\n\n        // Add a listener for processing messages from the child.\n        window.addEventListener('message', this._processMessage, false);\n\n        // Construct the iframe in the container element.\n        this._constructIframe();\n\n        return this;\n    };\n\n    /**\n     * The Child half of a responsive iframe.\n     *\n     * @memberof module:pym\n     * @class Child\n     * @param {Object} [config] Configuration for the child instance. sets {@link module:pym.Child~settings}\n     * @param {function} [config.renderCallback=null] Callback invoked after receiving a resize event from the parent, sets {@link module:pym.Child#settings.renderCallback}\n     * @param {string} [config.xdomain='*'] - xdomain to validate messages received\n     * @param {number} [config.polling=0] - polling frequency in milliseconds to send height to parent\n     * @param {number} [config.id] - parent container id used when navigating the child iframe to a new page but we want to keep it responsive.\n     * @param {string} [config.parenturlparam] - if passed it will be override the default parentUrl query string parameter name expected on the iframe src\n     */\n    lib.Child = function(config) {\n        /**\n         * The initial width of the parent page\n         *\n         * @memberof module:pym.Child\n         * @member {string} parentWidth\n         * @inner\n         */\n        this.parentWidth = null;\n        /**\n         * The id of the parent container\n         *\n         * @memberof module:pym.Child\n         * @member {String} id\n         * @inner\n         */\n        this.id = null;\n        /**\n         * The title of the parent page from document.title.\n         *\n         * @memberof module:pym.Child\n         * @member {String} parentTitle\n         * @inner\n         */\n        this.parentTitle = null;\n        /**\n         * The URL of the parent page from window.location.href.\n         *\n         * @memberof module:pym.Child\n         * @member {String} parentUrl\n         * @inner\n         */\n        this.parentUrl = null;\n        /**\n         * The settings for the child instance. Can be overriden by passing a config object to the child constructor\n         * i.e.: var pymChild = new pym.Child({renderCallback: render, xdomain: \"\\\\*\\.npr\\.org\"})\n         *\n         * @memberof module:pym.Child.settings\n         * @member {Object} settings - default settings for the child instance\n         * @inner\n         */\n        this.settings = {\n            renderCallback: null,\n            xdomain: '*',\n            polling: 0,\n            parenturlparam: 'parentUrl'\n        };\n\n        /**\n         * The timerId in order to be able to stop when polling is enabled\n         *\n         * @memberof module:pym.Child\n         * @member {String} timerId\n         * @inner\n         */\n        this.timerId = null;\n        /**\n         * RegularExpression to validate the received messages\n         *\n         * @memberof module:pym.Child\n         * @member {String} messageRegex\n         * @inner\n         */\n        this.messageRegex = null;\n        /**\n         * Stores the registered messageHandlers for each messageType\n         *\n         * @memberof module:pym.Child\n         * @member {Object} messageHandlers\n         * @inner\n         */\n        this.messageHandlers = {};\n\n        // Ensure a config object\n        config = (config || {});\n\n        /**\n         * Bind a callback to a given messageType from the child.\n         *\n         * Reserved message names are: \"width\".\n         *\n         * @memberof module:pym.Child\n         * @method onMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message being listened for.\n         * @param {module:pym.Child~onMessageCallback} callback The callback to invoke when a message of the given type is received.\n         */\n        this.onMessage = function(messageType, callback) {\n\n            if (!(messageType in this.messageHandlers)) {\n                this.messageHandlers[messageType] = [];\n            }\n\n            this.messageHandlers[messageType].push(callback);\n        };\n\n        /**\n         * @callback module:pym.Child~onMessageCallback\n         * @param {String} message The message data.\n         */\n\n\n        /**\n         * Fire all event handlers for a given message type.\n         *\n         * @memberof module:pym.Child\n         * @method _fire\n         * @inner\n         *\n         * @param {String} messageType The type of message.\n         * @param {String} message The message data.\n         */\n        this._fire = function(messageType, message) {\n            /*\n             * Fire all event handlers for a given message type.\n             */\n            if (messageType in this.messageHandlers) {\n                for (var i = 0; i < this.messageHandlers[messageType].length; i++) {\n                   this.messageHandlers[messageType][i].call(this, message);\n                }\n            }\n        };\n\n        /**\n         * Process a new message from the parent.\n         *\n         * @memberof module:pym.Child\n         * @method _processMessage\n         * @inner\n         *\n         * @param {Event} e A message event.\n         */\n        this._processMessage = function(e) {\n            /*\n            * Process a new message from parent frame.\n            */\n            // First, punt if this isn't from an acceptable xdomain.\n            if (!_isSafeMessage(e, this.settings)) {\n                return;\n            }\n\n            // Discard object messages, we only care about strings\n            if (typeof e.data !== 'string') {\n                return;\n            }\n\n            // Get the message from the parent.\n            var match = e.data.match(this.messageRegex);\n\n            // If there's no match or it's a bad format, punt.\n            if (!match || match.length !== 3) { return; }\n\n            var messageType = match[1];\n            var message = match[2];\n\n            this._fire(messageType, message);\n        }.bind(this);\n\n        /**\n         * Resize iframe in response to new width message from parent.\n         *\n         * @memberof module:pym.Child\n         * @method _onWidthMessage\n         * @inner\n         *\n         * @param {String} message The new width.\n         */\n        this._onWidthMessage = function(message) {\n            /*\n             * Handle width message from the child.\n             */\n            var width = parseInt(message);\n\n            // Change the width if it's different.\n            if (width !== this.parentWidth) {\n                this.parentWidth = width;\n\n                // Call the callback function if it exists.\n                if (this.settings.renderCallback) {\n                    this.settings.renderCallback(width);\n                }\n\n                // Send the height back to the parent.\n                this.sendHeight();\n            }\n        };\n\n        /**\n         * Send a message to the the Parent.\n         *\n         * @memberof module:pym.Child\n         * @method sendMessage\n         * @instance\n         *\n         * @param {String} messageType The type of message to send.\n         * @param {String} message The message data to send.\n         */\n        this.sendMessage = function(messageType, message) {\n            /*\n             * Send a message to the parent.\n             */\n            window.parent.postMessage(_makeMessage(this.id, messageType, message), '*');\n        };\n\n        /**\n         * Transmit the current iframe height to the parent.\n         *\n         * Call this directly in cases where you manually alter the height of the iframe contents.\n         *\n         * @memberof module:pym.Child\n         * @method sendHeight\n         * @instance\n         */\n        this.sendHeight = function() {\n            // Get the child's height.\n            var height = document.getElementsByTagName('body')[0].offsetHeight.toString();\n\n            // Send the height to the parent.\n            this.sendMessage('height', height);\n\n            return height;\n        }.bind(this);\n\n        /**\n         * Ask parent to send the current viewport and iframe position information\n         *\n         * @memberof module:pym.Child\n         * @method sendHeight\n         * @instance\n         */\n        this.getParentPositionInfo = function() {\n            // Send the height to the parent.\n            this.sendMessage('parentPositionInfo');\n        };\n\n        /**\n         * Scroll parent to a given element id.\n         *\n         * @memberof module:pym.Child\n         * @method scrollParentTo\n         * @instance\n         *\n         * @param {String} hash The id of the element to scroll to.\n         */\n        this.scrollParentTo = function(hash) {\n            this.sendMessage('navigateTo', '#' + hash);\n        };\n\n        /**\n         * Navigate parent to a given url.\n         *\n         * @memberof module:pym.Child\n         * @method navigateParentTo\n         * @instance\n         *\n         * @param {String} url The url to navigate to.\n         */\n        this.navigateParentTo = function(url) {\n            this.sendMessage('navigateTo', url);\n        };\n\n        /**\n         * Scroll parent to a given child element id.\n         *\n         * @memberof module:pym.Child\n         * @method scrollParentToChildEl\n         * @instance\n         *\n         * @param {String} id The id of the child element to scroll to.\n         */\n        this.scrollParentToChildEl = function(id) {\n            // Get the child element position using getBoundingClientRect + pageYOffset\n            // via https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n            var topPos = document.getElementById(id).getBoundingClientRect().top + window.pageYOffset;\n            this.scrollParentToChildPos(topPos);\n        };\n\n        /**\n         * Scroll parent to a particular child offset.\n         *\n         * @memberof module:pym.Child\n         * @method scrollParentToChildPos\n         * @instance\n         *\n         * @param {Number} pos The offset of the child element to scroll to.\n         */\n        this.scrollParentToChildPos = function(pos) {\n            this.sendMessage('scrollToChildPos', pos.toString());\n        };\n\n        /**\n         * Mark Whether the child is embedded or not\n         * executes a callback in case it was passed to the config\n         *\n         * @memberof module:pym.Child\n         * @method _markWhetherEmbedded\n         * @inner\n         *\n         * @param {module:pym.Child~onMarkedEmbeddedStatus} The callback to execute after determining whether embedded or not.\n         */\n        var _markWhetherEmbedded = function(onMarkedEmbeddedStatus) {\n          var htmlElement = document.getElementsByTagName('html')[0],\n              newClassForHtml,\n              originalHtmlClasses = htmlElement.className;\n          try {\n            if(window.self !== window.top) {\n              newClassForHtml = \"embedded\";\n            }else{\n              newClassForHtml = \"not-embedded\";\n            }\n          }catch(e) {\n            newClassForHtml = \"embedded\";\n          }\n          if(originalHtmlClasses.indexOf(newClassForHtml) < 0) {\n            htmlElement.className = originalHtmlClasses ? originalHtmlClasses + ' ' + newClassForHtml : newClassForHtml;\n            if(onMarkedEmbeddedStatus){\n              onMarkedEmbeddedStatus(newClassForHtml);\n            }\n            _raiseCustomEvent(\"marked-embedded\");\n          }\n        };\n\n        /**\n         * @callback module:pym.Child~onMarkedEmbeddedStatus\n         * @param {String} classname \"embedded\" or \"not-embedded\".\n         */\n\n        /**\n         * Unbind child event handlers and timers.\n         *\n         * @memberof module:pym.Child\n         * @method remove\n         * @instance\n         */\n        this.remove = function() {\n            window.removeEventListener('message', this._processMessage);\n            if (this.timerId) {\n                clearInterval(this.timerId);\n            }\n        };\n\n        // Initialize settings with overrides.\n        for (var key in config) {\n            this.settings[key] = config[key];\n        }\n\n        // Identify what ID the parent knows this child as.\n        this.id = _getParameterByName('childId') || config.id;\n        this.messageRegex = new RegExp('^pym' + MESSAGE_DELIMITER + this.id + MESSAGE_DELIMITER + '(\\\\S+)' + MESSAGE_DELIMITER + '(.*)$');\n\n        // Get the initial width from a URL parameter.\n        var width = parseInt(_getParameterByName('initialWidth'));\n\n        // Get the url of the parent frame\n        this.parentUrl = _getParameterByName(this.settings.parenturlparam);\n\n        // Get the title of the parent frame\n        this.parentTitle = _getParameterByName('parentTitle');\n\n        // Bind the required message handlers\n        this.onMessage('width', this._onWidthMessage);\n\n        // Set up a listener to handle any incoming messages.\n        window.addEventListener('message', this._processMessage, false);\n\n        // If there's a callback function, call it.\n        if (this.settings.renderCallback) {\n            this.settings.renderCallback(width);\n        }\n\n        // Send the initial height to the parent.\n        this.sendHeight();\n\n        // If we're configured to poll, create a setInterval to handle that.\n        if (this.settings.polling) {\n            this.timerId = window.setInterval(this.sendHeight, this.settings.polling);\n        }\n\n        _markWhetherEmbedded(config.onMarkedEmbeddedStatus);\n\n        return this;\n    };\n\n    // Initialize elements with pym data attributes\n    // if we are not in server configuration\n    if(typeof document !== \"undefined\") {\n        lib.autoInit(true);\n    }\n\n    return lib;\n});\n\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","tar","src","k","assign","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","null_to_empty","value","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","set_input_value","input","set_style","key","important","style","setProperty","crossorigin","current_component","is_crossorigin","window","parent","error","toggle_class","toggle","classList","set_current_component","get_current_component","Error","createEventDispatcher","type","detail","e","createEvent","initCustomEvent","custom_event","call","getContext","context","get","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","Set","flush","update","pop","has","add","clear","fragment","before_update","after_update","outroing","outros","transition_in","block","local","delete","transition_out","o","c","create_component","mount_component","on_mount","m","new_on_destroy","map","filter","destroy_component","make_dirty","then","fill","init","instance","create_fragment","not_equal","props","parent_component","prop_values","bound","Map","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","index","indexOf","splice","subscriber_queue","writable","start","stop","subscribers","set","new_value","run_queue","s","invalidate","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","pending","cleanup","sync","result","unsubscribers","makeAccessor","acc","val","filterObject","obj","iter","pair","TypeError","0","1","defineProperty","configurable","enumerable","fromEntries","entries","calcExtents","fields","extents","fl","j","f","firstRow","accessor","Number","isNaN","field","Infinity","dl","vl","partialDomain","domain","directive","calcDomain","$extents","$domain","NaN","compare","bisectRight","ascending","x","left","lo","hi","mid","right","step","n","arguments","ceil","range","e10","sqrt","e5","e2","tickIncrement","count","power","floor","log","LN10","pow","valueof","number","i0","value0","arrays","array","initRange","constructor","factory","prototype","extend","Color","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","r","g","rgbConvert","opacity","rgb_formatHex","hex","rgb_formatRgb","min","round","toString","h","Hsl","hslConvert","hsl2rgb","m1","m2","gamma","y","nogamma","t","exponential","constant","linear","define","copy","channels","displayable","formatHsl","brighter","darker","rgbGamma","end","colorRgb","genericArray","nb","na","Date","setTime","reA","reB","source","am","bm","bs","bi","lastIndex","q","one","zero","join","string","date","ArrayBuffer","isView","DataView","valueOf","object","numberArray","unit","identity","normalize","bimap","interpolate","d0","d1","r0","r1","polymap","reverse","bisect","clamp","unknown","transformer","transform","untransform","piecewise","output","interpolateValue","rescale","scale","invert","interpolateNumber","_","rangeRound","interpolateRound","u","continuous","toExponential","coefficient","formatDecimal","abs","prefixExponent","re","formatSpecifier","specifier","match","FormatSpecifier","align","sign","symbol","width","comma","precision","exponent","%","toFixed","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","group","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","replace","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","formatTrim","charCodeAt","padding","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","tickFormat","nice","apply","transformPow","transformSqrt","transformSquare","powish","quantile","thresholds","threshold","invertExtent","sort","quantiles","formatLocale","scaleLinear","z","createScale","$scale","$padding","$nice","$reverse","$width","$height","$range","$percentScale","defaultRange","height","percentRange","calcBaseRange","getDefaultRange","defaultScales","domainExtent","w","paddedDomain","pl","isTime","paddingAdjuster","adjustedDomain","getTime","padScale","console","createGetter","$acc","v","getRange","computed_style","getComputedStyle","z_index","zIndex","position","iframe","tabIndex","contentWindow","onload","ssr","pointerEvents","containerWidth","containerHeight","custom","xDomain","yDomain","zDomain","rDomain","xNice","yNice","zNice","rNice","xReverse","defaultReverses","yReverse","zReverse","rReverse","xPadding","yPadding","zPadding","rPadding","xScale","yScale","zScale","rScale","xRange","yRange","zRange","rRange","flatData","config","_percentRange","_containerWidth","_containerHeight","_x","_y","_z","_r","_custom","_data","_xDomain","_yDomain","_zDomain","_rDomain","_xNice","_yNice","_zNice","_rNice","_xReverse","_yReverse","_zReverse","_rReverse","_xPadding","_yPadding","_zPadding","_rPadding","_xScale","_yScale","_zScale","_rScale","_xRange","_yRange","_zRange","_rRange","_padding","_flatData","_extents","_config","activeGetters_d","$x","$y","$z","$r","padding_d","top","bottom","box_d","$containerWidth","$containerHeight","width_d","$box","height_d","extents_d","$flatData","$activeGetters","xDomain_d","yDomain_d","zDomain_d","rDomain_d","xScale_d","xGet_d","yScale_d","yGet_d","zScale_d","zGet_d","rScale_d","rGet_d","xRange_d","yRange_d","zRange_d","rRange_d","aspectRatio_d","$aspectRatio","setContext","activeGetters","aspectRatio","xGet","yGet","zGet","rGet","viewBox","zIndexStyle","pointerEventsStyle","Adder","reset","temp","adder","bv","av","epsilon","pi","PI","halfPi","quarterPi","tau","degrees","radians","atan","atan2","cos","exp","sin","acos","asin","haversin","streamGeometry","geometry","stream","streamGeometryType","streamObjectType","Feature","FeatureCollection","features","Sphere","sphere","Point","coordinates","point","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","lineStart","lineEnd","polygonStart","polygonEnd","lambda00","phi00","lambda0","cosPhi0","sinPhi0","areaRingSum","areaSum","areaStream","areaRingStart","areaRingEnd","areaRing","areaPointFirst","areaPoint","lambda","phi","dLambda","sdLambda","adLambda","cosPhi","sinPhi","spherical","cartesian","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","vector","cartesianNormalizeInPlace","phi0","lambda1","phi1","lambda2","p0","ranges","W0","W1","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","x0","y0","z0","deltaSum","boundsStream","boundsPoint","boundsLineStart","boundsLineEnd","boundsRingPoint","boundsRingStart","boundsRingEnd","linePoint","normal","inflection","phii","delta","lambdai","antimeridian","angle","rangeCompare","rangeContains","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroidPointCartesian","centroidLinePointFirst","centroidLinePoint","centroidRingPointFirst","centroidRingPoint","cx","cy","cz","compose","rotationIdentity","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","rotate","forward","circleStream","radius","direction","t0","t1","cosRadius","sinRadius","circleRadius","line","lines","rejoin","concat","shift","Intersection","points","other","entry","segments","compareIntersection","startInside","subject","clip","segment","p1","pointEqual","link","current","isSubject","sum","longitude","polygon","winding","ring","point0","sinPhi1","cosPhi1","point1","absDelta","arc","intersection","phiArc","pointVisible","clipLine","sink","ringBuffer","clipBuffer","ringSink","polygonStarted","pointRing","ringStart","ringEnd","merge","polygonContains","clipRejoin","pointLine","clean","ringSegments","validSegment","sign0","sign1","sinLambda0Lambda1","clipAntimeridianIntersect","to","cr","smallRadius","notHemisphere","visible","intersect","two","n1","n2","n2n2","n1n2","determinant","c1","c2","n1xn2","A","uu","t2","polar","q1","code","c0","v0","v00","point2","clipRectangle","x1","y1","a1","corner","comparePoint","ca","cb","x__","y__","v__","x_","y_","v_","first","activeStream","bufferStream","clipStream","a0","b0","b1","polygonInside","cleanInside","ax","ay","dx","dy","lengthSum","lengthStream","lengthPointFirst","lengthLineEnd","lengthPoint","cosDelta","containsObjectType","containsGeometry","containsGeometryType","containsPoint","containsLine","containsPolygon","distance","ao","bo","ab","ringRadians","pointRadians","graticuleX","graticuleY","graticule","Y","DX","DY","outline","extent","extentMajor","extentMinor","stepMajor","stepMinor","x00","y00","area","bounds","centroid","centroidPointFirstLine","centroidPointLine","centroidPointFirstRing","centroidPointRing","PathContext","_context","_radius","pointRadius","_line","_point","closePath","moveTo","lineTo","lengthRing","PathString","_string","circle","projection","projectionStream","contextStream","path","pathArea","measure","pathMeasure","pathBounds","pathCentroid","methods","TransformStream","fit","fitBounds","clipExtent","translate","geoStream","fitExtent","fitSize","size","fitWidth","fitHeight","_circle","cosMinDistance","project","delta2","resampleLineTo","depth","d2","phi2","x2","y2","dx2","dy2","dz","a00","b00","c00","resampleStream","ringPoint","resample","resampleNone","transformRadians","scaleTranslate","sx","sy","scaleTranslateRotate","alpha","cosAlpha","sinAlpha","ai","ci","fi","projectionMutator","projectAt","projectResample","projectTransform","projectRotateTransform","cache","cacheStream","theta","preclip","clipAntimeridian","postclip","recenter","center","transformRotate","clipAngle","clipCircle","reflectX","reflectY","conicProjection","parallels","conicEqualAreaRaw","sy0","cylindricalEqualAreaRaw","r0y","conicEqualArea","azimuthalRaw","azimuthalInvert","sc","cc","azimuthalEqualAreaRaw","cxcy","azimuthalEquidistantRaw","mercatorRaw","mercatorProjection","reclip","tany","conicConformalRaw","cy0","fy","equirectangularRaw","conicEquidistantRaw","gy","nx","A1","A2","A3","A4","M","equalEarthRaw","l2","l6","gnomonicRaw","naturalEarth1Raw","phi4","orthographicRaw","stereographicRaw","transverseMercatorRaw","feature","deltaMax","cy1","sy1","kx0","ky0","kx1","ky1","B","lower48Point","alaskaPoint","hawaiiPoint","lower48","albers","alaska","hawaii","pointStream","albersUsa","streams","sa","tx","ty","kx","ky","setContents","keys","row","projectionName","$data","layerData","selectedDomain","colors","mapField","dataField","legendConfig","tooltipX","tooltipY","tooltipContent","colorScale","scaleThreshold","geo","geoPath","geo.geoPath","getValue","lookup","properties","fillPath","enter","title","pymChild","dispatch","setSearch","searchTerm","defNum","headers","sortField","keyField","tableId","enableSearch","defaultOpen","autoSort","sliceSize","sliceMid","updateHeight","setTimeout","sendHeight","doSort","searchIdx","filteredData","evt","geojson","subtitle","scaleQuantile","csvData","perc_car","election_result","formatNum","getColor","region_id","styleNs","module","exports","pym","lib","_raiseCustomEvent","eventName","initEvent","dispatchEvent","_getParameterByName","results","location","search","decodeURIComponent","_isSafeMessage","settings","xdomain","origin","_makeMessage","id","messageType","message","_getNow","now","_cleanAutoInitInstances","idx","autoInitInstances","el","getElementsByTagName","autoInit","doNotRaiseEvents","elements","querySelectorAll","random","substr","sandbox","allowfullscreen","parenturlparam","parenturlvalue","optionalparams","trackscroll","scrollwait","err","Parent","url","getElementById","href","messageRegex","_makeMessageRegex","messageHandlers","_constructIframe","offsetWidth","hash","hashIndex","encodeURIComponent","firstChild","_onResize","_throttleOnScroll","sendWidth","sendViewportAndIFramePosition","bind","_onScroll","_fire","remove","_processMessage","_onHeightMessage","_onNavigateToMessage","_isSafeUrl","_onScrollToChildPosMessage","totalOffset","getBoundingClientRect","pageYOffset","scrollTo","onMessage","sendMessage","postMessage","iframeRect","payload","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","func","wait","args","timeout","previous","later","leading","remaining","clearTimeout","trailing","_throttle","Child","parentWidth","parentTitle","parentUrl","renderCallback","polling","timerId","_onWidthMessage","offsetHeight","getParentPositionInfo","scrollParentTo","navigateParentTo","scrollParentToChildEl","topPos","scrollParentToChildPos","pos","clearInterval","setInterval","onMarkedEmbeddedStatus","newClassForHtml","htmlElement","originalHtmlClasses","className","self","_markWhetherEmbedded","body"],"mappings":"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"}